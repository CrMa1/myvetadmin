(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,319,e=>{"use strict";var t=e.i(43476),a=e.i(7233),r=e.i(67881),s=e.i(70065),i=e.i(23750),n=e.i(94179),l=e.i(62870),o=e.i(71645),c=e.i(55436),d=e.i(88511),u=e.i(27612),m=e.i(75254);let p=(0,m.default)("CircleArrowUp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]]),h=(0,m.default)("CircleArrowDown",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]]);var x=e.i(37727),g=e.i(1851),y=e.i(64211),v=e.i(30374),f=e.i(10708);function j({accounting:e,onAdd:a,onEdit:m,onDelete:j,filterType:C,onClearFilter:N}){let[b,S]=(0,o.useState)(""),[E,I]=(0,o.useState)("all"),[w,D]=(0,o.useState)(!1),[P,A]=(0,o.useState)(!1),[k,T]=(0,o.useState)(!1),[L,O]=(0,o.useState)(null),[F,B]=(0,o.useState)({type:"",category:"",description:"",amount:"",status:"Completado"}),M=(0,o.useMemo)(()=>{let t=e;if(C&&(t=t.filter(e=>e.type===C)),"all"!==E&&(t=t.filter(e=>e.type===E)),b){let e=b.toLowerCase();t=t.filter(t=>t.category.toLowerCase().includes(e)||t.description.toLowerCase().includes(e)||t.id.toLowerCase().includes(e))}return t},[e,b,E,C]),R=()=>{B({type:"",category:"",description:"",amount:"",status:"Completado"})};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(s.Card,{children:[(0,t.jsx)(s.CardHeader,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(s.CardTitle,{children:"Registros Contables"}),(0,t.jsx)(s.CardDescription,{children:"Historial de ingresos y egresos"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[C&&(0,t.jsxs)(r.Button,{variant:"outline",size:"sm",onClick:N,children:[(0,t.jsx)(x.X,{className:"h-4 w-4 mr-2"}),"Limpiar filtro"]}),(0,t.jsxs)(l.Select,{value:E,onValueChange:I,children:[(0,t.jsx)(l.SelectTrigger,{className:"w-40",children:(0,t.jsx)(l.SelectValue,{placeholder:"Tipo"})}),(0,t.jsxs)(l.SelectContent,{children:[(0,t.jsx)(l.SelectItem,{value:"all",children:"Todos"}),(0,t.jsx)(l.SelectItem,{value:"Ingreso",children:"Ingresos"}),(0,t.jsx)(l.SelectItem,{value:"Egreso",children:"Egresos"})]})]}),(0,t.jsxs)("div",{className:"relative w-64",children:[(0,t.jsx)(c.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,t.jsx)(i.Input,{type:"search",placeholder:"Buscar registros...",className:"pl-10",value:b,onChange:e=>S(e.target.value)})]})]})]})}),(0,t.jsxs)(s.CardContent,{children:[(0,t.jsx)("div",{className:"rounded-lg border border-border overflow-hidden",children:(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{className:"bg-muted/50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-muted-foreground",children:"ID"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-muted-foreground",children:"Tipo"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-muted-foreground",children:"Categoría"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-muted-foreground",children:"Descripción"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-muted-foreground",children:"Monto"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-muted-foreground",children:"Fecha"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-muted-foreground",children:"Estado"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-muted-foreground",children:"Acciones"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-border",children:M.map(e=>{let a="Ingreso"===e.type,s=new Date(e.date);return(0,t.jsxs)("tr",{className:"hover:bg-muted/30 transition-colors",children:[(0,t.jsx)("td",{className:"px-4 py-3 text-sm font-mono text-muted-foreground",children:e.id}),(0,t.jsx)("td",{className:"px-4 py-3",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[a?(0,t.jsx)(p,{className:"h-4 w-4 text-green-500"}):(0,t.jsx)(h,{className:"h-4 w-4 text-red-500"}),(0,t.jsx)("span",{className:a?"text-green-500":"text-red-500",children:e.type})]})}),(0,t.jsx)("td",{className:"px-4 py-3",children:(0,t.jsx)(n.Badge,{variant:"outline",children:e.category})}),(0,t.jsx)("td",{className:"px-4 py-3",children:(0,t.jsx)("p",{className:"text-sm",children:e.description})}),(0,t.jsx)("td",{className:"px-4 py-3",children:(0,t.jsxs)("p",{className:`text-sm font-bold ${a?"text-green-500":"text-red-500"}`,children:[a?"+":"-","$",e.amount.toLocaleString()]})}),(0,t.jsx)("td",{className:"px-4 py-3",children:(0,t.jsx)("p",{className:"text-sm",children:(0,g.format)(s,"dd MMM yyyy",{locale:y.es})})}),(0,t.jsx)("td",{className:"px-4 py-3",children:(0,t.jsx)(n.Badge,{variant:"Completado"===e.status?"default":"secondary",children:e.status})}),(0,t.jsx)("td",{className:"px-4 py-3",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(r.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>{O(e),B({type:e.type,category:e.category,description:e.description,amount:e.amount.toString(),status:e.status}),A(!0)},children:(0,t.jsx)(d.Edit,{className:"h-4 w-4"})}),(0,t.jsx)(r.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive hover:text-destructive",onClick:()=>{O(e),T(!0)},children:(0,t.jsx)(u.Trash2,{className:"h-4 w-4"})})]})})]},e.id)})})]})})}),0===M.length&&(0,t.jsx)("div",{className:"text-center py-12",children:(0,t.jsx)("p",{className:"text-muted-foreground",children:"No se encontraron registros"})}),(0,t.jsxs)("div",{className:"mt-4 flex items-center justify-between text-sm text-muted-foreground",children:[(0,t.jsxs)("p",{children:["Mostrando ",M.length," de ",e.length," registros"]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(p,{className:"h-4 w-4 text-green-500"}),(0,t.jsxs)("span",{children:["Ingresos: $",M.filter(e=>"Ingreso"===e.type).reduce((e,t)=>e+t.amount,0).toLocaleString()]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(h,{className:"h-4 w-4 text-red-500"}),(0,t.jsxs)("span",{children:["Egresos: $",M.filter(e=>"Egreso"===e.type).reduce((e,t)=>e+t.amount,0).toLocaleString()]})]})]})]})]})]}),(0,t.jsx)(v.Dialog,{open:w||P,onOpenChange:e=>{e||(D(!1),A(!1),R(),O(null))},children:(0,t.jsxs)(v.DialogContent,{className:"max-w-2xl",children:[(0,t.jsxs)(v.DialogHeader,{children:[(0,t.jsx)(v.DialogTitle,{children:w?"Nuevo Registro":"Editar Registro"}),(0,t.jsx)(v.DialogDescription,{children:w?"Complete los datos del nuevo registro":"Modifique los datos del registro"})]}),(0,t.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(f.Label,{htmlFor:"type",children:["Tipo ",(0,t.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,t.jsxs)(l.Select,{value:F.type,onValueChange:e=>B({...F,type:e}),children:[(0,t.jsx)(l.SelectTrigger,{children:(0,t.jsx)(l.SelectValue,{placeholder:"Seleccione"})}),(0,t.jsxs)(l.SelectContent,{children:[(0,t.jsx)(l.SelectItem,{value:"Ingreso",children:"Ingreso"}),(0,t.jsx)(l.SelectItem,{value:"Egreso",children:"Egreso"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(f.Label,{htmlFor:"category",children:["Categoría ",(0,t.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,t.jsx)(i.Input,{id:"category",value:F.category,onChange:e=>B({...F,category:e.target.value}),placeholder:"Ej: Consultas"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(f.Label,{htmlFor:"description",children:["Descripción ",(0,t.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,t.jsx)(i.Input,{id:"description",value:F.description,onChange:e=>B({...F,description:e.target.value}),placeholder:"Describa el registro"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(f.Label,{htmlFor:"amount",children:["Monto ",(0,t.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,t.jsx)(i.Input,{id:"amount",type:"number",min:"0",value:F.amount,onChange:e=>B({...F,amount:e.target.value}),onKeyPress:e=>{/[0-9]/.test(e.key)||e.preventDefault()},placeholder:"Ej: 1500"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(f.Label,{htmlFor:"status",children:"Estado"}),(0,t.jsxs)(l.Select,{value:F.status,onValueChange:e=>B({...F,status:e}),children:[(0,t.jsx)(l.SelectTrigger,{children:(0,t.jsx)(l.SelectValue,{placeholder:"Seleccione"})}),(0,t.jsxs)(l.SelectContent,{children:[(0,t.jsx)(l.SelectItem,{value:"Completado",children:"Completado"}),(0,t.jsx)(l.SelectItem,{value:"Pendiente",children:"Pendiente"})]})]})]})]})]}),(0,t.jsxs)(v.DialogFooter,{children:[(0,t.jsx)(r.Button,{variant:"outline",onClick:()=>{D(!1),A(!1),R(),O(null)},children:"Cancelar"}),(0,t.jsx)(r.Button,{onClick:w?()=>{F.type&&F.category&&F.description&&F.amount?(a({id:`ACC-${Math.floor(9e3*Math.random())+1e3}`,...F,amount:Number.parseInt(F.amount),date:new Date().toISOString()}),D(!1),R()):alert("Por favor complete todos los campos obligatorios")}:()=>{F.type&&F.category&&F.description&&F.amount?(m({...L,...F,amount:Number.parseInt(F.amount)}),A(!1),R(),O(null)):alert("Por favor complete todos los campos obligatorios")},children:w?"Agregar":"Guardar Cambios"})]})]})}),(0,t.jsx)(v.Dialog,{open:k,onOpenChange:T,children:(0,t.jsxs)(v.DialogContent,{children:[(0,t.jsxs)(v.DialogHeader,{children:[(0,t.jsx)(v.DialogTitle,{children:"Confirmar Eliminación"}),(0,t.jsxs)(v.DialogDescription,{children:["¿Está seguro que desea eliminar el registro ",(0,t.jsx)("strong",{children:L?.description}),"? Esta acción no se puede deshacer."]})]}),(0,t.jsxs)(v.DialogFooter,{children:[(0,t.jsx)(r.Button,{variant:"outline",onClick:()=>T(!1),children:"Cancelar"}),(0,t.jsx)(r.Button,{variant:"destructive",onClick:()=>{L&&(j(L.id),T(!1),O(null))},children:"Eliminar"})]})]})})]})}var C=e.i(66046),N=e.i(73921),b=e.i(86687),S=o,E=e.i(7670),I=e.i(72733),w=e.i(38279),D=e.i(97865),P=e.i(69212),A=e.i(94395),k=e.i(81977),T=e.i(62728),L=e.i(79812),O=e.i(41818),F=e.i(844),B=e.i(45542),M=e.i(59798),R=e.i(46710),V=e.i(75337),K=e.i(61849),$=e.i(92860),z=e.i(61764),G=(e,t,a,r)=>(0,z.selectAxisWithScale)(e,"xAxis",t,r),H=(e,t,a,r)=>(0,z.selectTicksOfGraphicalItem)(e,"xAxis",t,r),W=(e,t,a,r)=>(0,z.selectAxisWithScale)(e,"yAxis",a,r),U=(e,t,a,r)=>(0,z.selectTicksOfGraphicalItem)(e,"yAxis",a,r),q=(0,K.createSelector)([R.selectChartLayout,G,W,H,U],(e,t,a,r,s)=>(0,L.isCategoricalAxis)(e,"xAxis")?(0,L.getBandSizeOfAxis)(t,r,!1):(0,L.getBandSizeOfAxis)(a,s,!1));function J(e){return"line"===e.type}var X=(0,K.createSelector)([z.selectUnfilteredCartesianItems,(e,t,a,r,s)=>s],(e,t)=>e.filter(J).find(e=>e.id===t)),Y=(0,K.createSelector)([R.selectChartLayout,G,W,H,U,X,q,$.selectChartDataWithIndexesIfNotInPanorama],(e,t,a,r,s,i,n,l)=>{var o,{chartData:c,dataStartIndex:d,dataEndIndex:u}=l;if(null!=i&&null!=t&&null!=a&&null!=r&&null!=s&&0!==r.length&&0!==s.length&&null!=n){var{dataKey:m,data:p}=i;if(null!=(o=null!=p&&p.length>0?p:null==c?void 0:c.slice(d,u+1)))return function(e){var{layout:t,xAxis:a,yAxis:r,xAxisTicks:s,yAxisTicks:i,dataKey:n,bandSize:l,displayedData:o}=e;return o.map((e,o)=>{var c=(0,L.getValueByDataKey)(e,n);if("horizontal"===t)return{x:(0,L.getCateCoordinateOfLine)({axis:a,ticks:s,bandSize:l,entry:e,index:o}),y:(0,A.isNullish)(c)?null:r.scale(c),value:c,payload:e};var d=(0,A.isNullish)(c)?null:a.scale(c),u=(0,L.getCateCoordinateOfLine)({axis:r,ticks:i,bandSize:l,entry:e,index:o});return null==d||null==u?null:{x:d,y:u,value:c,payload:e}}).filter(Boolean)}({layout:e,xAxis:t,yAxis:a,xAxisTicks:r,yAxisTicks:s,dataKey:m,bandSize:n,displayedData:o})}}),_=e.i(27241),Q=e.i(95146),Z=e.i(40657),ee=e.i(51883),et=e.i(52734),ea=e.i(15549),er=e.i(91187),es=e.i(57999),ei=e.i(66576),en=e.i(43404),el=e.i(81583),eo=["id"],ec=["type","layout","connectNulls","needClip"],ed=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function eu(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function em(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?eu(Object(a),!0).forEach(function(t){var r,s,i;r=e,s=t,i=a[t],(s=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(s))in r?Object.defineProperty(r,s,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[s]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):eu(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function ep(e,t){if(null==e)return{};var a,r,s=function(e,t){if(null==e)return{};var a={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;a[r]=e[r]}return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)a=i[r],-1===t.indexOf(a)&&({}).propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}function eh(){return(eh=Object.assign.bind()).apply(null,arguments)}function ex(e){var{dataKey:t,data:a,stroke:r,strokeWidth:s,fill:i,name:n,hide:l,unit:o}=e;return{dataDefinedOnItem:a,positions:void 0,settings:{stroke:r,strokeWidth:s,fill:i,dataKey:t,nameKey:void 0,name:(0,L.getTooltipNameProp)(n,t),hide:l,type:e.tooltipType,color:e.stroke,unit:o}}}var eg=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function ey(e){var{clipPathId:t,points:a,props:r}=e,{dot:s,dataKey:i,needClip:n}=r;if(null==a||!s&&1!==a.length)return null;var{id:l}=r,o=ep(r,eo),c=(0,k.isClipDot)(s),d=(0,es.svgPropertiesNoEvents)(o),u=(0,en.svgPropertiesAndEventsFromUnknown)(s),m=a.map((e,t)=>{var r,n=em(em(em({key:"dot-".concat(t),r:3},d),u),{},{index:t,cx:e.x,cy:e.y,dataKey:i,value:e.value,payload:e.payload,points:a});if(S.isValidElement(s))r=S.cloneElement(s,n);else if("function"==typeof s)r=s(n);else{var l=(0,E.clsx)("recharts-line-dot","boolean"!=typeof s?s.className:"");r=S.createElement(w.Dot,eh({},n,{className:l}))}return r}),p={clipPath:n?"url(#clipPath-".concat(c?"":"dots-").concat(t,")"):void 0};return S.createElement(D.Layer,eh({className:"recharts-line-dots",key:"dots"},p),m)}function ev(e){var{showLabels:t,children:a,points:r}=e,s=(0,S.useMemo)(()=>null==r?void 0:r.map(e=>{var t={x:e.x,y:e.y,width:0,height:0};return em(em({},t),{},{value:e.value,payload:e.payload,viewBox:t,parentViewBox:void 0,fill:void 0})}),[r]);return S.createElement(P.CartesianLabelListContextProvider,{value:t?s:null},a)}function ef(e){var{clipPathId:t,pathRef:a,points:r,strokeDasharray:s,props:i}=e,{type:n,layout:l,connectNulls:o,needClip:c}=i,d=ep(i,ec),u=em(em({},(0,en.svgPropertiesAndEvents)(d)),{},{fill:"none",className:"recharts-line-curve",clipPath:c?"url(#clipPath-".concat(t,")"):void 0,points:r,type:n,layout:l,connectNulls:o,strokeDasharray:null!=s?s:i.strokeDasharray});return S.createElement(S.Fragment,null,(null==r?void 0:r.length)>1&&S.createElement(I.Curve,eh({},u,{pathRef:a})),S.createElement(ey,{points:r,clipPathId:t,props:i}))}function ej(e){var{clipPathId:t,props:a,pathRef:r,previousPointsRef:s,longestAnimatedLengthRef:i}=e,{points:n,strokeDasharray:l,isAnimationActive:o,animationBegin:c,animationDuration:d,animationEasing:u,animateNewValues:m,width:p,height:h,onAnimationEnd:x,onAnimationStart:g}=a,y=s.current,v=(0,Z.useAnimationId)(a,"recharts-line-"),[f,j]=(0,S.useState)(!1),C=(0,S.useCallback)(()=>{"function"==typeof x&&x(),j(!1)},[x]),N=(0,S.useCallback)(()=>{"function"==typeof g&&g(),j(!0)},[g]),b=function(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch(e){return 0}}(r.current),E=i.current;return S.createElement(ev,{points:n,showLabels:!f},a.children,S.createElement(ei.JavascriptAnimate,{animationId:v,begin:c,duration:d,isActive:o,easing:u,onAnimationEnd:C,onAnimationStart:N,key:v},e=>{var c,d=Math.min((0,A.interpolate)(E,b+E,e),b);if(c=o?l?((e,t,a)=>{var r=a.reduce((e,t)=>e+t);if(!r)return eg(t,e);for(var s=Math.floor(e/r),i=e%r,n=t-e,l=[],o=0,c=0;o<a.length;c+=a[o],++o)if(c+a[o]>i){l=[...a.slice(0,o),i-c];break}var d=l.length%2==0?[0,n]:[n];return[...function(e,t){for(var a=e.length%2!=0?[...e,0]:e,r=[],s=0;s<t;++s)r=[...r,...a];return r}(a,s),...l,...d].map(e=>"".concat(e,"px")).join(", ")})(d,b,"".concat(l).split(/[,\s]+/gim).map(e=>parseFloat(e))):eg(b,d):null==l?void 0:String(l),y){var u=y.length/n.length,x=1===e?n:n.map((t,a)=>{var r=Math.floor(a*u);if(y[r]){var s=y[r];return em(em({},t),{},{x:(0,A.interpolate)(s.x,t.x,e),y:(0,A.interpolate)(s.y,t.y,e)})}return m?em(em({},t),{},{x:(0,A.interpolate)(2*p,t.x,e),y:(0,A.interpolate)(h/2,t.y,e)}):em(em({},t),{},{x:t.x,y:t.y})});return s.current=x,S.createElement(ef,{props:a,points:x,clipPathId:t,pathRef:r,strokeDasharray:c})}return e>0&&b>0&&(s.current=n,i.current=d),S.createElement(ef,{props:a,points:n,clipPathId:t,pathRef:r,strokeDasharray:c})}),S.createElement(P.LabelListFromLabelProp,{label:a.label}))}function eC(e){var{clipPathId:t,props:a}=e,r=(0,S.useRef)(null),s=(0,S.useRef)(0),i=(0,S.useRef)(null);return S.createElement(ej,{props:a,clipPathId:t,previousPointsRef:r,longestAnimatedLengthRef:s,pathRef:i})}var eN=(e,t)=>({x:e.x,y:e.y,value:e.value,errorVal:(0,L.getValueByDataKey)(e.payload,t)});class eb extends S.Component{render(){var{hide:e,dot:t,points:a,className:r,xAxisId:s,yAxisId:i,top:n,left:l,width:o,height:c,id:d,needClip:u}=this.props;if(e)return null;var m=(0,E.clsx)("recharts-line",r),{r:p,strokeWidth:h}=(0,el.getRadiusAndStrokeWidthFromDot)(t),x=(0,k.isClipDot)(t),g=2*p+h;return S.createElement(S.Fragment,null,S.createElement(D.Layer,{className:m},u&&S.createElement("defs",null,S.createElement(M.GraphicalItemClipPath,{clipPathId:d,xAxisId:s,yAxisId:i}),!x&&S.createElement("clipPath",{id:"clipPath-dots-".concat(d)},S.createElement("rect",{x:l-g/2,y:n-g/2,width:o+g,height:c+g}))),S.createElement(B.SetErrorBarContext,{xAxisId:s,yAxisId:i,data:a,dataPointFormatter:eN,errorBarOffset:0},S.createElement(eC,{props:this.props,clipPathId:d}))),S.createElement(O.ActivePoints,{activeDot:this.props.activeDot,points:a,mainColor:this.props.stroke,itemDataKey:this.props.dataKey}))}}var eS={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:!T.Global.isSsr,label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0};function eE(e){var t=(0,ee.resolveDefaultProps)(e,eS),{activeDot:a,animateNewValues:r,animationBegin:s,animationDuration:i,animationEasing:n,connectNulls:l,dot:o,hide:c,isAnimationActive:d,label:u,legendType:m,xAxisId:p,yAxisId:h,id:x}=t,g=ep(t,ed),{needClip:y}=(0,M.useNeedsClip)(p,h),v=(0,et.usePlotArea)(),f=(0,R.useChartLayout)(),j=(0,V.useIsPanorama)(),C=(0,_.useAppSelector)(e=>Y(e,p,h,j,x));if("horizontal"!==f&&"vertical"!==f||null==C||null==v)return null;var{height:N,width:b,x:E,y:I}=v;return S.createElement(eb,eh({},g,{id:x,connectNulls:l,dot:o,activeDot:a,animateNewValues:r,animationBegin:s,animationDuration:i,animationEasing:n,isAnimationActive:d,hide:c,label:u,legendType:m,xAxisId:p,yAxisId:h,points:C,layout:f,height:N,width:b,left:E,top:I,needClip:y}))}var eI=S.memo(function(e){var t=(0,ee.resolveDefaultProps)(e,eS),a=(0,V.useIsPanorama)();return S.createElement(ea.RegisterGraphicalItemId,{id:t.id,type:"line"},e=>S.createElement(S.Fragment,null,S.createElement(Q.SetLegendPayload,{legendPayload:(e=>{var{dataKey:t,name:a,stroke:r,legendType:s,hide:i}=e;return[{inactive:i,dataKey:t,type:s,color:r,value:(0,L.getTooltipNameProp)(a,t),payload:e}]})(t)}),S.createElement(F.SetTooltipEntrySettings,{fn:ex,args:t}),S.createElement(er.SetCartesianGraphicalItem,{type:"line",id:e,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:a}),S.createElement(eE,eh({},t,{id:e}))))});eI.displayName="Line";var ew=e.i(25949),eD=e.i(33369),eP=["axis"],eA=(0,o.forwardRef)((e,t)=>o.createElement(eD.CartesianChart,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:eP,tooltipPayloadSearcher:ew.arrayTooltipSearcher,categoricalChartProps:e,ref:t})),ek=e.i(72526),eT=e.i(85183),eL=e.i(93230),eO=e.i(81092);function eF(){let e=(0,o.useMemo)(()=>{let e=b.generateMockData.accounting(90),t=new Map;return e.forEach(e=>{var a;let r,s=(a=new Date(e.date),(r=(0,eO.toDate)(a,void 0)).setDate(1),r.setHours(0,0,0,0),r),i=(0,g.format)(s,"MMM yyyy",{locale:y.es});t.has(i)||t.set(i,{income:0,expenses:0,net:0});let n=t.get(i);"Ingreso"===e.type?n.income+=e.amount:n.expenses+=e.amount,n.net=n.income-n.expenses}),Array.from(t.entries()).map(([e,t])=>({month:e,ingresos:t.income,egresos:t.expenses,neto:t.net})).slice(-6)},[]);return(0,t.jsxs)(s.Card,{children:[(0,t.jsxs)(s.CardHeader,{children:[(0,t.jsx)(s.CardTitle,{children:"Tendencia Financiera"}),(0,t.jsx)(s.CardDescription,{children:"Ingresos, egresos y balance neto mensual"})]}),(0,t.jsx)(s.CardContent,{children:(0,t.jsx)(N.ChartContainer,{config:{ingresos:{label:"Ingresos",color:"hsl(var(--chart-2))"},egresos:{label:"Egresos",color:"hsl(var(--chart-3))"},neto:{label:"Neto",color:"hsl(var(--chart-1))"}},className:"h-[350px] w-full",children:(0,t.jsxs)(eA,{data:e,margin:{top:10,right:10,left:0,bottom:0},children:[(0,t.jsx)(ek.CartesianGrid,{strokeDasharray:"3 3",vertical:!1}),(0,t.jsx)(eT.XAxis,{dataKey:"month",tickLine:!1,axisLine:!1,tickMargin:8}),(0,t.jsx)(eL.YAxis,{tickLine:!1,axisLine:!1,tickMargin:8,tickFormatter:e=>`$${e/1e3}k`}),(0,t.jsx)(N.ChartTooltip,{content:(0,t.jsx)(N.ChartTooltipContent,{})}),(0,t.jsx)(eI,{type:"monotone",dataKey:"ingresos",stroke:"var(--color-ingresos)",strokeWidth:2,dot:{r:4}}),(0,t.jsx)(eI,{type:"monotone",dataKey:"egresos",stroke:"var(--color-egresos)",strokeWidth:2,dot:{r:4}}),(0,t.jsx)(eI,{type:"monotone",dataKey:"neto",stroke:"var(--color-neto)",strokeWidth:3,dot:{r:5}})]})})})]})}var eB=e.i(84762),eM=e.i(26739),eR=e.i(45740),eV=e.i(974),eK=e.i(12426),e$=e.i(25652);let ez=(0,m.default)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),eG=(0,m.default)("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);var eH=e.i(99508);function eW(){let{getUserId:e,getClinicId:s}=(0,eM.useAuth)(),{showSuccess:n,showError:c,showWarning:d,AlertContainer:u}=(0,eV.useAlertToast)(),[m,p]=(0,o.useState)([]),[h,x]=(0,o.useState)([]),[g,y]=(0,o.useState)([]),[N,b]=(0,o.useState)(!0),[S,E]=(0,o.useState)(!1),[I,w]=(0,o.useState)(null),[D,P]=(0,o.useState)(null),[A,k]=(0,o.useState)({type:"",category:"",amount:"",description:"",date:""});(0,o.useEffect)(()=>{let t=e(),a=s();t&&a&&(T(),L())},[e,s]);let T=async()=>{try{b(!0);let t=e(),a=s(),r=await fetch(`/api/accounting?userId=${t}&clinicId=${a}`),i=await r.json();i.success?(p(i.data),x(i.data)):c(i.error||"Error al cargar registros")}catch(e){console.error("Error fetching accounting:",e),c("Error al cargar los registros")}finally{b(!1)}},L=async()=>{try{let e=await fetch("/api/conta-categories"),t=await e.json();t.success?y(t.data):d("No se pudieron cargar las categorías")}catch(e){console.error("Error fetching categories:",e)}},O=async t=>{if(confirm("¿Estás seguro de eliminar este registro?"))try{let a=e(),r=s(),i=await fetch(`/api/accounting?id=${t}&userId=${a}&clinicId=${r}`,{method:"DELETE"}),l=await i.json();l.success?(n("Registro eliminado exitosamente"),await T()):c(l.error||"Error al eliminar el registro")}catch(e){console.error("Error deleting record:",e),c("Error al eliminar el registro")}},F=async t=>{if(t.preventDefault(),!A.type||!A.category||!A.amount)return void d("Por favor completa todos los campos requeridos");try{let t=I?"PUT":"POST",a=e(),r=s(),i=I?{type:A.type,categoryId:A.category,amount:A.amount,description:A.description,date:A.date,id:I.id,userId:a,clinicId:r}:{type:A.type,categoryId:A.category,amount:A.amount,description:A.description,date:A.date,userId:a,clinicId:r},l=await fetch("/api/accounting",{method:t,headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}),o=await l.json();o.success?(n(I?"Registro actualizado exitosamente":"Registro agregado exitosamente"),E(!1),await T()):c(o.error||"Error al guardar el registro")}catch(e){console.error("Error saving record:",e),c("Error al guardar el registro")}},B=(e,t)=>{k(a=>({...a,[e]:t}))},M=e=>{P(e),e?x(m.filter(t=>t.type===e)):x(m)};if(N)return(0,t.jsx)(eR.LoadingPage,{message:"Cargando registros contables..."});let R=e(),V=s();if(!R||!V)return(0,t.jsx)("div",{className:"p-8",children:"Por favor selecciona un consultorio"});let K=m.filter(e=>"Ingreso"===e.type).reduce((e,t)=>e+Number.parseFloat(t.amount||0),0),$=m.filter(e=>"Egreso"===e.type).reduce((e,t)=>e+Number.parseFloat(t.amount||0),0),z=K-$,G=m.length;return(0,t.jsxs)("div",{className:"p-8",children:[(0,t.jsx)(u,{}),(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Contabilidad"}),(0,t.jsxs)(r.Button,{onClick:()=>{w(null),k({type:"",category:"",amount:"",description:"",date:new Date().toISOString().split("T")[0]}),E(!0)},className:"btn-primary",children:[(0,t.jsx)(a.Plus,{className:"w-4 h-4 mr-2"}),"Nuevo Registro"]})]}),(0,t.jsxs)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4 mb-6",children:[(0,t.jsx)(C.StatsCard,{title:"Ingresos Totales",subtitle:"Total de entradas",value:(0,eH.formatCurrency)(K),icon:e$.TrendingUp,trend:{value:0,isPositive:!0},onClick:()=>M("Ingreso"),isActive:"Ingreso"===D,variant:"success"}),(0,t.jsx)(C.StatsCard,{title:"Egresos Totales",subtitle:"Total de salidas",value:(0,eH.formatCurrency)($),icon:ez,trend:{value:0,isPositive:!1},onClick:()=>M("Egreso"),isActive:"Egreso"===D,variant:"danger"}),(0,t.jsx)(C.StatsCard,{title:"Balance",subtitle:"Ganancia/Pérdida neta",value:(0,eH.formatCurrency)(z),icon:eK.DollarSign,trend:{value:0,isPositive:z>=0},variant:z>=0?"success":"danger"}),(0,t.jsx)(C.StatsCard,{title:"Transacciones",subtitle:"Registros totales",value:G,icon:eG,trend:{value:0,isPositive:!0},onClick:()=>M(null),isActive:null===D})]}),(0,t.jsx)(eF,{accounting:m}),(0,t.jsx)("br",{}),(0,t.jsx)(j,{accounting:h,onEdit:e=>{w(e),k({type:e.type||"",category:e.categoryId?.toString()||"",amount:e.amount||"",description:e.description||"",date:e.date||""}),E(!0)},onDelete:O,onSearch:e=>{x(m.filter(t=>(t.category?.toLowerCase()||"").includes(e.toLowerCase())||(t.description?.toLowerCase()||"").includes(e.toLowerCase())))}}),(0,t.jsx)(v.Dialog,{open:S,onOpenChange:E,children:(0,t.jsxs)(v.DialogContent,{className:"max-w-2xl",children:[(0,t.jsx)(v.DialogHeader,{children:(0,t.jsx)(v.DialogTitle,{children:I?"Editar Registro":"Agregar Nuevo Registro"})}),(0,t.jsxs)("form",{onSubmit:F,className:"grid gap-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(f.Label,{htmlFor:"type",children:"Tipo *"}),(0,t.jsxs)(l.Select,{value:A.type,onValueChange:e=>B("type",e),children:[(0,t.jsx)(l.SelectTrigger,{children:(0,t.jsx)(l.SelectValue,{placeholder:"Seleccionar"})}),(0,t.jsxs)(l.SelectContent,{children:[(0,t.jsx)(l.SelectItem,{value:"Ingreso",children:"Ingreso"}),(0,t.jsx)(l.SelectItem,{value:"Egreso",children:"Egreso"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(f.Label,{htmlFor:"category",children:"Categoría *"}),(0,t.jsxs)(l.Select,{value:A.category,onValueChange:e=>B("category",e),children:[(0,t.jsx)(l.SelectTrigger,{children:(0,t.jsx)(l.SelectValue,{placeholder:"Seleccionar"})}),(0,t.jsx)(l.SelectContent,{children:g.map(e=>(0,t.jsx)(l.SelectItem,{value:e.id.toString(),children:e.name},e.id))})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(f.Label,{htmlFor:"amount",children:"Monto *"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground",children:"$"}),(0,t.jsx)(i.Input,{id:"amount",value:A.amount,onChange:e=>{var t;let a;return t=e.target.value,void((""===(a=(0,eH.parseCurrency)(t))||/^\d*\.?\d{0,2}$/.test(a))&&B("amount",a))},placeholder:"0.00",className:"pl-7",required:!0})]}),A.amount&&(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:(0,eH.formatCurrency)(A.amount)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(f.Label,{htmlFor:"date",children:"Fecha"}),(0,t.jsx)(i.Input,{id:"date",type:"date",value:A.date,onChange:e=>B("date",e.target.value)})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(f.Label,{htmlFor:"description",children:"Descripción"}),(0,t.jsx)(eB.Textarea,{id:"description",value:A.description,onChange:e=>B("description",e.target.value),rows:3})]}),(0,t.jsxs)(v.DialogFooter,{children:[(0,t.jsx)(r.Button,{type:"button",variant:"outline",onClick:()=>E(!1),children:"Cancelar"}),(0,t.jsx)(r.Button,{type:"submit",className:"btn-primary",children:I?"Actualizar":"Guardar"})]})]})]})})]})}e.s(["default",()=>eW],319)}]);