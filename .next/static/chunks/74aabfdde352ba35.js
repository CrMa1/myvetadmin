(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,47627,e=>{"use strict";var a=e.i(43476),l=e.i(47163);function t({className:e,...t}){return(0,a.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,a.jsx)("table",{"data-slot":"table",className:(0,l.cn)("w-full caption-bottom text-sm",e),...t})})}function r({className:e,...t}){return(0,a.jsx)("thead",{"data-slot":"table-header",className:(0,l.cn)("[&_tr]:border-b",e),...t})}function s({className:e,...t}){return(0,a.jsx)("tbody",{"data-slot":"table-body",className:(0,l.cn)("[&_tr:last-child]:border-0",e),...t})}function i({className:e,...t}){return(0,a.jsx)("tr",{"data-slot":"table-row",className:(0,l.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...t})}function n({className:e,...t}){return(0,a.jsx)("th",{"data-slot":"table-head",className:(0,l.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}function o({className:e,...t}){return(0,a.jsx)("td",{"data-slot":"table-cell",className:(0,l.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}e.s(["Table",()=>t,"TableBody",()=>s,"TableCell",()=>o,"TableHead",()=>n,"TableHeader",()=>r,"TableRow",()=>i])},78583,e=>{"use strict";let a=(0,e.i(75254).default)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);e.s(["FileText",()=>a],78583)},5856,e=>{"use strict";var a=e.i(43476),l=e.i(71645),t=e.i(7233),r=e.i(67881),s=e.i(75254);let i=(0,s.default)("Dog",[["path",{d:"M11.25 16.25h1.5L12 17z",key:"w7jh35"}],["path",{d:"M16 14v.5",key:"1lajdz"}],["path",{d:"M4.42 11.247A13.152 13.152 0 0 0 4 14.556C4 18.728 7.582 21 12 21s8-2.272 8-6.444a11.702 11.702 0 0 0-.493-3.309",key:"u7s9ue"}],["path",{d:"M8 14v.5",key:"1nzgdb"}],["path",{d:"M8.5 8.5c-.384 1.05-1.083 2.028-2.344 2.5-1.931.722-3.576-.297-3.656-1-.113-.994 1.177-6.53 4-7 1.923-.321 3.651.845 3.651 2.235A7.497 7.497 0 0 1 14 5.277c0-1.39 1.844-2.598 3.767-2.277 2.823.47 4.113 6.006 4 7-.08.703-1.725 1.722-3.656 1-1.261-.472-1.855-1.45-2.239-2.5",key:"v8hric"}]]),n=(0,s.default)("Cat",[["path",{d:"M12 5c.67 0 1.35.09 2 .26 1.78-2 5.03-2.84 6.42-2.26 1.4.58-.42 7-.42 7 .57 1.07 1 2.24 1 3.44C21 17.9 16.97 21 12 21s-9-3-9-7.56c0-1.25.5-2.4 1-3.44 0 0-1.89-6.42-.5-7 1.39-.58 4.72.23 6.5 2.23A9.04 9.04 0 0 1 12 5Z",key:"x6xyqk"}],["path",{d:"M8 14v.5",key:"1nzgdb"}],["path",{d:"M16 14v.5",key:"1lajdz"}],["path",{d:"M11.25 16.25h1.5L12 17l-.75-.75Z",key:"12kq1m"}]]),o=(0,s.default)("Bird",[["path",{d:"M16 7h.01",key:"1kdx03"}],["path",{d:"M3.4 18H12a8 8 0 0 0 8-8V7a4 4 0 0 0-7.28-2.3L2 20",key:"oj1oa8"}],["path",{d:"m20 7 2 .5-2 .5",key:"12nv4d"}],["path",{d:"M10 18v3",key:"1yea0a"}],["path",{d:"M14 17.75V21",key:"1pymcb"}],["path",{d:"M7 18a6 6 0 0 0 3.84-10.61",key:"1npnn0"}]]),c=(0,s.default)("Rabbit",[["path",{d:"M13 16a3 3 0 0 1 2.24 5",key:"1epib5"}],["path",{d:"M18 12h.01",key:"yjnet6"}],["path",{d:"M18 21h-8a4 4 0 0 1-4-4 7 7 0 0 1 7-7h.2L9.6 6.4a1 1 0 1 1 2.8-2.8L15.8 7h.2c3.3 0 6 2.7 6 6v1a2 2 0 0 1-2 2h-1a3 3 0 0 0-3 3",key:"ue9ozu"}],["path",{d:"M20 8.54V4a2 2 0 1 0-4 0v3",key:"49iql8"}],["path",{d:"M7.612 12.524a3 3 0 1 0-1.6 4.3",key:"1e33i0"}]]);var d=e.i(66046);function h({patients:e,onFilterClick:l,activeFilter:t}){let r=e.length,s=e.filter(e=>"Perro"===e.species).length,h=e.filter(e=>"Gato"===e.species).length,u=e.filter(e=>"Ave"===e.species).length,x=e.filter(e=>!["Perro","Gato","Ave"].includes(e.species)).length;return(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6 mb-6",children:[{label:"Total Pacientes",value:r,icon:i,color:"text-primary",filter:null,subtitle:"Registrados en el sistema"},{label:"Perros",value:s,icon:i,color:"text-accent",filter:"Perro",subtitle:"Pacientes caninos"},{label:"Gatos",value:h,icon:n,color:"text-accent",filter:"Gato",subtitle:"Pacientes felinos"},{label:"Aves",value:u,icon:o,color:"text-accent",filter:"Ave",subtitle:"Pacientes aviares"},{label:"Otros",value:x,icon:c,color:"text-muted-foreground",filter:"Otros",subtitle:"Otras especies"}].map(e=>{let r=e.icon,s=t===e.filter;return(0,a.jsx)(d.StatsCard,{label:e.label,value:e.value,icon:r,color:e.color,isActive:s,onClick:()=>l(e.filter),subtitle:e.subtitle},e.label)})})}var u=e.i(18566),x=e.i(70065),m=e.i(23750),g=e.i(55436),p=e.i(88511),b=e.i(27612),j=e.i(78583),v=e.i(47627);function y({patients:e,onEdit:t,onDelete:s,onSearch:i}){let[n,o]=(0,l.useState)(""),c=(0,u.useRouter)();return(0,a.jsxs)(x.Card,{className:"p-6",children:[(0,a.jsx)("div",{className:"flex items-center gap-4 mb-6",children:(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)(g.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),(0,a.jsx)(m.Input,{placeholder:"Buscar por nombre, dueño o tipo de animal...",value:n,onChange:e=>{let a=e.target.value;o(a),i(a)},className:"pl-10"})]})}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)(v.Table,{children:[(0,a.jsx)(v.TableHeader,{children:(0,a.jsxs)(v.TableRow,{children:[(0,a.jsx)(v.TableHead,{children:"ID"}),(0,a.jsx)(v.TableHead,{children:"Nombre"}),(0,a.jsx)(v.TableHead,{children:"Tipo"}),(0,a.jsx)(v.TableHead,{children:"Raza"}),(0,a.jsx)(v.TableHead,{children:"Edad"}),(0,a.jsx)(v.TableHead,{children:"Peso"}),(0,a.jsx)(v.TableHead,{children:"Dueño"}),(0,a.jsx)(v.TableHead,{children:"Teléfono"}),(0,a.jsx)(v.TableHead,{children:"Última Visita"}),(0,a.jsx)(v.TableHead,{className:"text-right",children:"Acciones"})]})}),(0,a.jsx)(v.TableBody,{children:0===e.length?(0,a.jsx)(v.TableRow,{children:(0,a.jsx)(v.TableCell,{colSpan:10,className:"text-center text-muted-foreground",children:"No se encontraron pacientes"})}):e.map(e=>(0,a.jsxs)(v.TableRow,{children:[(0,a.jsx)(v.TableCell,{className:"font-medium",children:e.id}),(0,a.jsx)(v.TableCell,{children:e.name}),(0,a.jsx)(v.TableCell,{children:e.animalType}),(0,a.jsx)(v.TableCell,{children:e.breed}),(0,a.jsxs)(v.TableCell,{children:[e.age," años"]}),(0,a.jsxs)(v.TableCell,{children:[e.weight," kg"]}),(0,a.jsx)(v.TableCell,{children:e.ownerName}),(0,a.jsx)(v.TableCell,{children:e.ownerPhone}),(0,a.jsx)(v.TableCell,{children:new Date(e.lastVisit).toLocaleDateString("es-MX")}),(0,a.jsx)(v.TableCell,{className:"text-right",children:(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,a.jsx)(r.Button,{variant:"ghost",size:"sm",onClick:()=>c.push(`/kardex/${e.id}`),title:"Ver Kardex",children:(0,a.jsx)(j.FileText,{className:"w-4 h-4"})}),(0,a.jsx)(r.Button,{variant:"ghost",size:"sm",onClick:()=>t(e),children:(0,a.jsx)(p.Edit,{className:"w-4 h-4"})}),(0,a.jsx)(r.Button,{variant:"ghost",size:"sm",onClick:()=>s(e.id),children:(0,a.jsx)(b.Trash2,{className:"w-4 h-4 text-destructive"})})]})})]},e.id))})]})})]})}var f=e.i(30374),w=e.i(10708),T=e.i(62870),C=e.i(84762),k=e.i(26739),N=e.i(45740),S=e.i(974);function H(){let{user:e,selectedClinic:s,getUserId:i,getClinicId:n}=(0,k.useAuth)(),{showSuccess:o,showError:c,showWarning:d,AlertContainer:u}=(0,S.useAlertToast)(),[x,g]=(0,l.useState)([]),[p,b]=(0,l.useState)([]),[j,v]=(0,l.useState)([]),[H,M]=(0,l.useState)(!0),[P,L]=(0,l.useState)(!1),[E,I]=(0,l.useState)(null),[A,D]=(0,l.useState)(null),[F,z]=(0,l.useState)({name:"",species:"",breed:"",age:"",weight:"",sex:"",owner:"",color:"",medicalHistory:"",allergies:""});(0,l.useEffect)(()=>{i()&&n()&&(B(),R())},[e,s]);let B=async()=>{try{M(!0);let e=await fetch(`/api/patients?userId=${i()}&clinicId=${n()}`),a=await e.json();a.success?(g(a.data),b(a.data)):c(a.error||"Error al cargar pacientes")}catch(e){console.error("Error fetching patients:",e),c("Error al cargar los pacientes")}finally{M(!1)}},R=async()=>{try{let e=await fetch("/api/species"),a=await e.json();a.success?v(a.data):d("No se pudieron cargar las especies")}catch(e){console.error("Error fetching species:",e)}},V=async e=>{if(confirm("¿Estás seguro de eliminar este paciente?"))try{let a=await fetch(`/api/patients?id=${e}&userId=${i()}&clinicId=${n()}`,{method:"DELETE"}),l=await a.json();l.success?(o("Paciente eliminado exitosamente"),await B()):c(l.error||"Error al eliminar el paciente")}catch(e){console.error("Error deleting patient:",e),c("Error al eliminar el paciente")}},q=async e=>{if(e.preventDefault(),!F.name||!F.species||!F.owner)return void d("Por favor completa todos los campos requeridos");try{let e=E?"PUT":"POST",a=E?{name:F.name,speciesId:F.species,breed:F.breed,age:F.age,weight:F.weight,sex:F.sex,owner:F.owner,color:F.color,medicalHistory:F.medicalHistory,allergies:F.allergies,id:E.id,userId:i(),clinicId:n()}:{name:F.name,speciesId:F.species,breed:F.breed,age:F.age,weight:F.weight,sex:F.sex,owner:F.owner,color:F.color,medicalHistory:F.medicalHistory,allergies:F.allergies,userId:i(),clinicId:n()},l=await fetch("/api/patients",{method:e,headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),t=await l.json();t.success?(o(E?"Paciente actualizado exitosamente":"Paciente agregado exitosamente"),L(!1),await B()):c(t.error||"Error al guardar el paciente")}catch(e){console.error("Error saving patient:",e),c("Error al guardar el paciente")}},O=(e,a)=>{z(l=>({...l,[e]:a}))};return H?(0,a.jsx)(N.LoadingPage,{message:"Cargando pacientes..."}):i()&&n()?(0,a.jsxs)("div",{className:"p-8",children:[(0,a.jsx)(u,{}),(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Pacientes"}),(0,a.jsxs)(r.Button,{onClick:()=>{I(null),z({name:"",species:"",breed:"",age:"",weight:"",sex:"",owner:"",color:"",medicalHistory:"",allergies:""}),L(!0)},className:"btn-primary",children:[(0,a.jsx)(t.Plus,{className:"w-4 h-4 mr-2"}),"Agregar Paciente"]})]}),(0,a.jsx)(h,{patients:x,onFilterClick:e=>{D(e),e?b(x.filter(a=>a.species===e)):b(x)},activeFilter:A}),(0,a.jsx)(y,{patients:p,onEdit:e=>{I(e),z({name:e.name||"",species:e.species_id.toString()||"",breed:e.breed||"",age:e.age||"",weight:e.weight||"",sex:e.sex||"",owner:e.owner||"",color:e.color||"",medicalHistory:e.medical_history||"",allergies:e.allergies||""}),L(!0)},onDelete:V,onSearch:e=>{b(x.filter(a=>a.name.toLowerCase().includes(e.toLowerCase())||a.owner.toLowerCase().includes(e.toLowerCase())||a.species.toLowerCase().includes(e.toLowerCase())))}}),(0,a.jsx)(f.Dialog,{open:P,onOpenChange:L,children:(0,a.jsxs)(f.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)(f.DialogHeader,{children:(0,a.jsx)(f.DialogTitle,{children:E?"Editar Paciente":"Agregar Nuevo Paciente"})}),(0,a.jsxs)("form",{onSubmit:q,className:"grid gap-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(w.Label,{htmlFor:"name",children:"Nombre *"}),(0,a.jsx)(m.Input,{id:"name",value:F.name,onChange:e=>O("name",e.target.value),required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(w.Label,{htmlFor:"species",children:"Especie *"}),(0,a.jsxs)(T.Select,{value:F.species,onValueChange:e=>O("species",e),children:[(0,a.jsx)(T.SelectTrigger,{children:(0,a.jsx)(T.SelectValue,{placeholder:"Seleccionar"})}),(0,a.jsx)(T.SelectContent,{children:j.map(e=>(0,a.jsx)(T.SelectItem,{value:e.id.toString(),children:e.name},e.id))})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(w.Label,{htmlFor:"breed",children:"Raza"}),(0,a.jsx)(m.Input,{id:"breed",value:F.breed,onChange:e=>O("breed",e.target.value)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(w.Label,{htmlFor:"age",children:"Edad (años)"}),(0,a.jsx)(m.Input,{id:"age",type:"number",value:F.age,onChange:e=>O("age",e.target.value),onKeyPress:e=>{/[0-9]/.test(e.key)||e.preventDefault()}})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(w.Label,{htmlFor:"weight",children:"Peso (kg)"}),(0,a.jsx)(m.Input,{id:"weight",type:"number",step:"0.1",value:F.weight,onChange:e=>O("weight",e.target.value),onKeyPress:e=>{/[0-9.]/.test(e.key)||e.preventDefault()}})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(w.Label,{htmlFor:"sex",children:"Sexo"}),(0,a.jsxs)(T.Select,{value:F.sex,onValueChange:e=>O("sex",e),children:[(0,a.jsx)(T.SelectTrigger,{children:(0,a.jsx)(T.SelectValue,{placeholder:"Seleccionar"})}),(0,a.jsxs)(T.SelectContent,{children:[(0,a.jsx)(T.SelectItem,{value:"Macho",children:"Macho"}),(0,a.jsx)(T.SelectItem,{value:"Hembra",children:"Hembra"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(w.Label,{htmlFor:"owner",children:"Nombre del Dueño *"}),(0,a.jsx)(m.Input,{id:"owner",value:F.owner,onChange:e=>O("owner",e.target.value),required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(w.Label,{htmlFor:"color",children:"Color"}),(0,a.jsx)(m.Input,{id:"color",value:F.color,onChange:e=>O("color",e.target.value)})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(w.Label,{htmlFor:"medicalHistory",children:"Historial Médico"}),(0,a.jsx)(C.Textarea,{id:"medicalHistory",value:F.medicalHistory,onChange:e=>O("medicalHistory",e.target.value),rows:3})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(w.Label,{htmlFor:"allergies",children:"Alergias"}),(0,a.jsx)(C.Textarea,{id:"allergies",value:F.allergies,onChange:e=>O("allergies",e.target.value),rows:2})]}),(0,a.jsxs)(f.DialogFooter,{children:[(0,a.jsx)(r.Button,{type:"button",variant:"outline",onClick:()=>L(!1),children:"Cancelar"}),(0,a.jsx)(r.Button,{type:"submit",className:"btn-primary",children:E?"Actualizar":"Guardar"})]})]})]})})]}):(0,a.jsx)("div",{className:"p-8",children:"Por favor selecciona un consultorio"})}e.s(["default",()=>H],5856)}]);