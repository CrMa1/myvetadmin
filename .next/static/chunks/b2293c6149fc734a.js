(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,84762,e=>{"use strict";var s=e.i(43476),i=e.i(71645),r=e.i(47163);let a=i.forwardRef(({className:e,...i},a)=>(0,s.jsx)("textarea",{className:(0,r.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...i}));a.displayName="Textarea",e.s(["Textarea",()=>a])},6758,e=>{"use strict";var s=e.i(43476),i=e.i(71645),r=e.i(7233),a=e.i(88511),l=e.i(27612),o=e.i(7486),t=e.i(67881),n=e.i(70065),c=e.i(30374),d=e.i(10708),u=e.i(23750),h=e.i(84762),m=e.i(26739),x=e.i(45740),p=e.i(974);function g(){let{user:e,selectedClinic:g,selectClinic:j,getUserId:v}=(0,m.useAuth)(),{showSuccess:f,showError:C,showWarning:y,AlertContainer:b}=(0,p.useAlertToast)(),[N,w]=(0,i.useState)([]),[E,T]=(0,i.useState)(!0),[B,D]=(0,i.useState)(!1),[S,F]=(0,i.useState)(null),[L,P]=(0,i.useState)({name:"",address:"",phone:"",email:"",city:"",state:"",postalCode:"",description:""});(0,i.useEffect)(()=>{v()&&k()},[v]);let k=async()=>{try{T(!0);let e=v(),s=await fetch(`/api/clinics?userId=${e}`),i=await s.json();i.success?w(i.data):C(i.error||"Error al cargar consultorios")}catch(e){console.error("Error fetching clinics:",e),C("Error al cargar los consultorios")}finally{T(!1)}},A=()=>{F(null),P({name:"",address:"",phone:"",email:"",city:"",state:"",postalCode:"",description:""}),D(!0)},I=async e=>{if(confirm("¿Estás seguro de eliminar este consultorio?"))try{let s=v(),i=await fetch(`/api/clinics?id=${e}&userId=${s}`,{method:"DELETE"}),r=await i.json();r.success?(f("Consultorio eliminado exitosamente"),await k(),g&&g.id===e&&(localStorage.removeItem("selectedClinic"),window.location.href="/seleccionar-consultorio")):C(r.error||"Error al eliminar el consultorio")}catch(e){console.error("Error deleting clinic:",e),C("Error al eliminar el consultorio")}},O=async e=>{if(e.preventDefault(),!L.name||!L.address||!L.phone)return void y("Por favor completa todos los campos requeridos");try{let e=S?"PUT":"POST",s=v(),i=S?{...L,id:S.id,userId:s}:{...L,userId:s},r=await fetch("/api/clinics",{method:e,headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}),a=await r.json();a.success?(f(S?"Consultorio actualizado exitosamente":"Consultorio agregado exitosamente"),D(!1),await k()):C(a.error||"Error al guardar el consultorio")}catch(e){console.error("Error saving clinic:",e),C("Error al guardar el consultorio")}},$=(e,s)=>{P(i=>({...i,[e]:s}))};return E?(0,s.jsx)(x.LoadingPage,{message:"Cargando consultorios..."}):v()?(0,s.jsxs)("div",{className:"p-8",children:[(0,s.jsx)(b,{}),(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Mis Consultorios"}),(0,s.jsxs)(t.Button,{onClick:A,className:"btn-primary",children:[(0,s.jsx)(r.Plus,{className:"w-4 h-4 mr-2"}),"Agregar Consultorio"]})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:0===N.length?(0,s.jsxs)(n.Card,{className:"col-span-full p-8 text-center",children:[(0,s.jsx)(o.Building2,{className:"w-12 h-12 mx-auto mb-4 text-muted-foreground"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"No tienes consultorios registrados"}),(0,s.jsx)(t.Button,{onClick:A,className:"mt-4",children:"Agregar tu primer consultorio"})]}):N.map(e=>(0,s.jsxs)(n.Card,{className:`p-6 hover:shadow-lg transition-shadow ${g&&g.id===e.id?"ring-2 ring-primary":""}`,children:[(0,s.jsx)("div",{className:"flex items-start justify-between mb-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center",children:(0,s.jsx)(o.Building2,{className:"w-6 h-6 text-primary"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold text-lg",children:e.name}),g&&g.id===e.id&&(0,s.jsx)("span",{className:"text-xs text-primary font-medium",children:"Activo"})]})]})}),(0,s.jsxs)("div",{className:"space-y-2 mb-4 text-sm text-muted-foreground",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Dirección:"})," ",e.address]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Teléfono:"})," ",e.phone]}),e.email&&(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Email:"})," ",e.email]}),e.city&&(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Ciudad:"})," ",e.city]}),e.description&&(0,s.jsxs)("p",{className:"mt-2",children:[(0,s.jsx)("strong",{children:"Descripción:"})," ",e.description]})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(!g||g.id!==e.id)&&(0,s.jsx)(t.Button,{onClick:()=>{j(e),f(`Consultorio "${e.name}" seleccionado`)},className:"flex-1",variant:"outline",children:"Seleccionar"}),(0,s.jsx)(t.Button,{onClick:()=>{F(e),P({name:e.name||"",address:e.address||"",phone:e.phone||"",email:e.email||"",city:e.city||"",state:e.state||"",postalCode:e.postal_code||"",description:e.description||""}),D(!0)},variant:"outline",size:"icon",children:(0,s.jsx)(a.Edit,{className:"w-4 h-4"})}),(0,s.jsx)(t.Button,{onClick:()=>I(e.id),variant:"outline",size:"icon",children:(0,s.jsx)(l.Trash2,{className:"w-4 h-4 text-destructive"})})]})]},e.id))}),(0,s.jsx)(c.Dialog,{open:B,onOpenChange:D,children:(0,s.jsxs)(c.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,s.jsx)(c.DialogHeader,{children:(0,s.jsx)(c.DialogTitle,{children:S?"Editar Consultorio":"Agregar Nuevo Consultorio"})}),(0,s.jsxs)("form",{onSubmit:O,className:"grid gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(d.Label,{htmlFor:"name",children:"Nombre del Consultorio *"}),(0,s.jsx)(u.Input,{id:"name",value:L.name,onChange:e=>$("name",e.target.value),required:!0,placeholder:"Ej: Clínica Veterinaria San Francisco"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(d.Label,{htmlFor:"address",children:"Dirección Completa *"}),(0,s.jsx)(h.Textarea,{id:"address",value:L.address,onChange:e=>$("address",e.target.value),required:!0,placeholder:"Calle, número, colonia",rows:2})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(d.Label,{htmlFor:"city",children:"Ciudad"}),(0,s.jsx)(u.Input,{id:"city",value:L.city,onChange:e=>$("city",e.target.value),placeholder:"Ciudad"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(d.Label,{htmlFor:"state",children:"Estado"}),(0,s.jsx)(u.Input,{id:"state",value:L.state,onChange:e=>$("state",e.target.value),placeholder:"Estado"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(d.Label,{htmlFor:"postalCode",children:"Código Postal"}),(0,s.jsx)(u.Input,{id:"postalCode",value:L.postalCode,onChange:e=>$("postalCode",e.target.value),placeholder:"12345",onKeyPress:e=>{/[0-9]/.test(e.key)||e.preventDefault()}})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(d.Label,{htmlFor:"phone",children:"Teléfono *"}),(0,s.jsx)(u.Input,{id:"phone",value:L.phone,onChange:e=>$("phone",e.target.value),required:!0,placeholder:"(555) 123-4567"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(d.Label,{htmlFor:"email",children:"Email"}),(0,s.jsx)(u.Input,{id:"email",type:"email",value:L.email,onChange:e=>$("email",e.target.value),placeholder:"contacto@clinica.com"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(d.Label,{htmlFor:"description",children:"Descripción"}),(0,s.jsx)(h.Textarea,{id:"description",value:L.description,onChange:e=>$("description",e.target.value),rows:3,placeholder:"Breve descripción del consultorio..."})]}),(0,s.jsxs)(c.DialogFooter,{children:[(0,s.jsx)(t.Button,{type:"button",variant:"outline",onClick:()=>D(!1),children:"Cancelar"}),(0,s.jsx)(t.Button,{type:"submit",className:"btn-primary",children:S?"Actualizar":"Guardar"})]})]})]})})]}):(0,s.jsx)("div",{className:"p-8",children:"Por favor inicia sesión"})}e.s(["default",()=>g])}]);