module.exports=[15090,a=>{"use strict";var b=a.i(87924),c=a.i(15618),d=a.i(40695),e=a.i(3130),f=a.i(5522),g=a.i(54161),h=a.i(87682),i=a.i(72131),j=a.i(87532),k=a.i(24569),l=a.i(81560),m=a.i(70106);let n=(0,m.default)("CircleArrowUp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]]),o=(0,m.default)("CircleArrowDown",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]]);var p=a.i(33508),q=a.i(56711),r=a.i(33575),s=a.i(65733),t=a.i(17171);function u({accounting:a,onAdd:c,onEdit:m,onDelete:u,filterType:v,onClearFilter:w}){let[x,y]=(0,i.useState)(""),[z,A]=(0,i.useState)("all"),[B,C]=(0,i.useState)(!1),[D,E]=(0,i.useState)(!1),[F,G]=(0,i.useState)(!1),[H,I]=(0,i.useState)(null),[J,K]=(0,i.useState)({type:"",category:"",description:"",amount:"",status:"Completado"}),L=(0,i.useMemo)(()=>{let b=a;if(v&&(b=b.filter(a=>a.type===v)),"all"!==z&&(b=b.filter(a=>a.type===z)),x){let a=x.toLowerCase();b=b.filter(b=>b.category.toLowerCase().includes(a)||b.description.toLowerCase().includes(a)||b.id.toLowerCase().includes(a))}return b},[a,x,z,v]),M=()=>{K({type:"",category:"",description:"",amount:"",status:"Completado"})};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(e.CardTitle,{children:"Registros Contables"}),(0,b.jsx)(e.CardDescription,{children:"Historial de ingresos y egresos"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[v&&(0,b.jsxs)(d.Button,{variant:"outline",size:"sm",onClick:w,children:[(0,b.jsx)(p.X,{className:"h-4 w-4 mr-2"}),"Limpiar filtro"]}),(0,b.jsxs)(h.Select,{value:z,onValueChange:A,children:[(0,b.jsx)(h.SelectTrigger,{className:"w-40",children:(0,b.jsx)(h.SelectValue,{placeholder:"Tipo"})}),(0,b.jsxs)(h.SelectContent,{children:[(0,b.jsx)(h.SelectItem,{value:"all",children:"Todos"}),(0,b.jsx)(h.SelectItem,{value:"Ingreso",children:"Ingresos"}),(0,b.jsx)(h.SelectItem,{value:"Egreso",children:"Egresos"})]})]}),(0,b.jsxs)("div",{className:"relative w-64",children:[(0,b.jsx)(j.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,b.jsx)(f.Input,{type:"search",placeholder:"Buscar registros...",className:"pl-10",value:x,onChange:a=>y(a.target.value)})]})]})]})}),(0,b.jsxs)(e.CardContent,{children:[(0,b.jsx)("div",{className:"rounded-lg border border-border overflow-hidden",children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{className:"bg-muted/50",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-muted-foreground",children:"ID"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-muted-foreground",children:"Tipo"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-muted-foreground",children:"Categoría"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-muted-foreground",children:"Descripción"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-muted-foreground",children:"Monto"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-muted-foreground",children:"Fecha"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-muted-foreground",children:"Estado"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-muted-foreground",children:"Acciones"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-border",children:L.map(a=>{let c="Ingreso"===a.type,e=new Date(a.date);return(0,b.jsxs)("tr",{className:"hover:bg-muted/30 transition-colors",children:[(0,b.jsx)("td",{className:"px-4 py-3 text-sm font-mono text-muted-foreground",children:a.id}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[c?(0,b.jsx)(n,{className:"h-4 w-4 text-green-500"}):(0,b.jsx)(o,{className:"h-4 w-4 text-red-500"}),(0,b.jsx)("span",{className:c?"text-green-500":"text-red-500",children:a.type})]})}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsx)(g.Badge,{variant:"outline",children:a.category})}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsx)("p",{className:"text-sm",children:a.description})}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsxs)("p",{className:`text-sm font-bold ${c?"text-green-500":"text-red-500"}`,children:[c?"+":"-","$",a.amount.toLocaleString()]})}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsx)("p",{className:"text-sm",children:(0,q.format)(e,"dd MMM yyyy",{locale:r.es})})}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsx)(g.Badge,{variant:"Completado"===a.status?"default":"secondary",children:a.status})}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(d.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>{I(a),K({type:a.type,category:a.category,description:a.description,amount:a.amount.toString(),status:a.status}),E(!0)},children:(0,b.jsx)(k.Edit,{className:"h-4 w-4"})}),(0,b.jsx)(d.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive hover:text-destructive",onClick:()=>{I(a),G(!0)},children:(0,b.jsx)(l.Trash2,{className:"h-4 w-4"})})]})})]},a.id)})})]})})}),0===L.length&&(0,b.jsx)("div",{className:"text-center py-12",children:(0,b.jsx)("p",{className:"text-muted-foreground",children:"No se encontraron registros"})}),(0,b.jsxs)("div",{className:"mt-4 flex items-center justify-between text-sm text-muted-foreground",children:[(0,b.jsxs)("p",{children:["Mostrando ",L.length," de ",a.length," registros"]}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(n,{className:"h-4 w-4 text-green-500"}),(0,b.jsxs)("span",{children:["Ingresos: $",L.filter(a=>"Ingreso"===a.type).reduce((a,b)=>a+b.amount,0).toLocaleString()]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(o,{className:"h-4 w-4 text-red-500"}),(0,b.jsxs)("span",{children:["Egresos: $",L.filter(a=>"Egreso"===a.type).reduce((a,b)=>a+b.amount,0).toLocaleString()]})]})]})]})]})]}),(0,b.jsx)(s.Dialog,{open:B||D,onOpenChange:a=>{a||(C(!1),E(!1),M(),I(null))},children:(0,b.jsxs)(s.DialogContent,{className:"max-w-2xl",children:[(0,b.jsxs)(s.DialogHeader,{children:[(0,b.jsx)(s.DialogTitle,{children:B?"Nuevo Registro":"Editar Registro"}),(0,b.jsx)(s.DialogDescription,{children:B?"Complete los datos del nuevo registro":"Modifique los datos del registro"})]}),(0,b.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(t.Label,{htmlFor:"type",children:["Tipo ",(0,b.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,b.jsxs)(h.Select,{value:J.type,onValueChange:a=>K({...J,type:a}),children:[(0,b.jsx)(h.SelectTrigger,{children:(0,b.jsx)(h.SelectValue,{placeholder:"Seleccione"})}),(0,b.jsxs)(h.SelectContent,{children:[(0,b.jsx)(h.SelectItem,{value:"Ingreso",children:"Ingreso"}),(0,b.jsx)(h.SelectItem,{value:"Egreso",children:"Egreso"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(t.Label,{htmlFor:"category",children:["Categoría ",(0,b.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,b.jsx)(f.Input,{id:"category",value:J.category,onChange:a=>K({...J,category:a.target.value}),placeholder:"Ej: Consultas"})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(t.Label,{htmlFor:"description",children:["Descripción ",(0,b.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,b.jsx)(f.Input,{id:"description",value:J.description,onChange:a=>K({...J,description:a.target.value}),placeholder:"Describa el registro"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(t.Label,{htmlFor:"amount",children:["Monto ",(0,b.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,b.jsx)(f.Input,{id:"amount",type:"number",min:"0",value:J.amount,onChange:a=>K({...J,amount:a.target.value}),onKeyPress:a=>{/[0-9]/.test(a.key)||a.preventDefault()},placeholder:"Ej: 1500"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(t.Label,{htmlFor:"status",children:"Estado"}),(0,b.jsxs)(h.Select,{value:J.status,onValueChange:a=>K({...J,status:a}),children:[(0,b.jsx)(h.SelectTrigger,{children:(0,b.jsx)(h.SelectValue,{placeholder:"Seleccione"})}),(0,b.jsxs)(h.SelectContent,{children:[(0,b.jsx)(h.SelectItem,{value:"Completado",children:"Completado"}),(0,b.jsx)(h.SelectItem,{value:"Pendiente",children:"Pendiente"})]})]})]})]})]}),(0,b.jsxs)(s.DialogFooter,{children:[(0,b.jsx)(d.Button,{variant:"outline",onClick:()=>{C(!1),E(!1),M(),I(null)},children:"Cancelar"}),(0,b.jsx)(d.Button,{onClick:B?()=>{J.type&&J.category&&J.description&&J.amount?(c({id:`ACC-${Math.floor(9e3*Math.random())+1e3}`,...J,amount:Number.parseInt(J.amount),date:new Date().toISOString()}),C(!1),M()):alert("Por favor complete todos los campos obligatorios")}:()=>{J.type&&J.category&&J.description&&J.amount?(m({...H,...J,amount:Number.parseInt(J.amount)}),E(!1),M(),I(null)):alert("Por favor complete todos los campos obligatorios")},children:B?"Agregar":"Guardar Cambios"})]})]})}),(0,b.jsx)(s.Dialog,{open:F,onOpenChange:G,children:(0,b.jsxs)(s.DialogContent,{children:[(0,b.jsxs)(s.DialogHeader,{children:[(0,b.jsx)(s.DialogTitle,{children:"Confirmar Eliminación"}),(0,b.jsxs)(s.DialogDescription,{children:["¿Está seguro que desea eliminar el registro ",(0,b.jsx)("strong",{children:H?.description}),"? Esta acción no se puede deshacer."]})]}),(0,b.jsxs)(s.DialogFooter,{children:[(0,b.jsx)(d.Button,{variant:"outline",onClick:()=>G(!1),children:"Cancelar"}),(0,b.jsx)(d.Button,{variant:"destructive",onClick:()=>{H&&(u(H.id),G(!1),I(null))},children:"Eliminar"})]})]})})]})}var v=a.i(17493),w=a.i(12959),x=a.i(29242),y=i,z=a.i(98621),A=a.i(13667),B=a.i(25428),C=a.i(88949),D=a.i(36319),E=a.i(68932),F=a.i(37082),G=a.i(2321),H=a.i(56295),I=a.i(53242),J=a.i(12791),K=a.i(83663),L=a.i(17913),M=a.i(98382),N=a.i(25392),O=a.i(44381),P=a.i(98563),Q=a.i(12168),R=(a,b,c,d)=>(0,Q.selectAxisWithScale)(a,"xAxis",b,d),S=(a,b,c,d)=>(0,Q.selectTicksOfGraphicalItem)(a,"xAxis",b,d),T=(a,b,c,d)=>(0,Q.selectAxisWithScale)(a,"yAxis",c,d),U=(a,b,c,d)=>(0,Q.selectTicksOfGraphicalItem)(a,"yAxis",c,d),V=(0,O.createSelector)([M.selectChartLayout,R,T,S,U],(a,b,c,d,e)=>(0,H.isCategoricalAxis)(a,"xAxis")?(0,H.getBandSizeOfAxis)(b,d,!1):(0,H.getBandSizeOfAxis)(c,e,!1));function W(a){return"line"===a.type}var X=(0,O.createSelector)([Q.selectUnfilteredCartesianItems,(a,b,c,d,e)=>e],(a,b)=>a.filter(W).find(a=>a.id===b)),Y=(0,O.createSelector)([M.selectChartLayout,R,T,S,U,X,V,P.selectChartDataWithIndexesIfNotInPanorama],(a,b,c,d,e,f,g,h)=>{var i,{chartData:j,dataStartIndex:k,dataEndIndex:l}=h;if(null!=f&&null!=b&&null!=c&&null!=d&&null!=e&&0!==d.length&&0!==e.length&&null!=g){var{dataKey:m,data:n}=f;if(null!=(i=null!=n&&n.length>0?n:null==j?void 0:j.slice(k,l+1)))return function(a){var{layout:b,xAxis:c,yAxis:d,xAxisTicks:e,yAxisTicks:f,dataKey:g,bandSize:h,displayedData:i}=a;return i.map((a,i)=>{var j=(0,H.getValueByDataKey)(a,g);if("horizontal"===b)return{x:(0,H.getCateCoordinateOfLine)({axis:c,ticks:e,bandSize:h,entry:a,index:i}),y:(0,E.isNullish)(j)?null:d.scale(j),value:j,payload:a};var k=(0,E.isNullish)(j)?null:c.scale(j),l=(0,H.getCateCoordinateOfLine)({axis:d,ticks:f,bandSize:h,entry:a,index:i});return null==k||null==l?null:{x:k,y:l,value:j,payload:a}}).filter(Boolean)}({layout:a,xAxis:b,yAxis:c,xAxisTicks:d,yAxisTicks:e,dataKey:m,bandSize:g,displayedData:i})}}),Z=a.i(77368),$=a.i(92430),_=a.i(62320),aa=a.i(87293),ab=a.i(36745),ac=a.i(46780),ad=a.i(77025),ae=a.i(26150),af=a.i(76342),ag=a.i(7038),ah=a.i(10576),ai=["id"],aj=["type","layout","connectNulls","needClip"],ak=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function al(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function am(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?al(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):al(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}function an(a,b){if(null==a)return{};var c,d,e=function(a,b){if(null==a)return{};var c={};for(var d in a)if(({}).hasOwnProperty.call(a,d)){if(-1!==b.indexOf(d))continue;c[d]=a[d]}return c}(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],-1===b.indexOf(c)&&({}).propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}function ao(){return(ao=Object.assign.bind()).apply(null,arguments)}function ap(a){var{dataKey:b,data:c,stroke:d,strokeWidth:e,fill:f,name:g,hide:h,unit:i}=a;return{dataDefinedOnItem:c,positions:void 0,settings:{stroke:d,strokeWidth:e,fill:f,dataKey:b,nameKey:void 0,name:(0,H.getTooltipNameProp)(g,b),hide:h,type:a.tooltipType,color:a.stroke,unit:i}}}var aq=(a,b)=>"".concat(b,"px ").concat(a-b,"px");function ar(a){var{clipPathId:b,points:c,props:d}=a,{dot:e,dataKey:f,needClip:g}=d;if(null==c||!e&&1!==c.length)return null;var{id:h}=d,i=an(d,ai),j=(0,F.isClipDot)(e),k=(0,ae.svgPropertiesNoEvents)(i),l=(0,ag.svgPropertiesAndEventsFromUnknown)(e),m=c.map((a,b)=>{var d,g=am(am(am({key:"dot-".concat(b),r:3},k),l),{},{index:b,cx:a.x,cy:a.y,dataKey:f,value:a.value,payload:a.payload,points:c});if(y.isValidElement(e))d=y.cloneElement(e,g);else if("function"==typeof e)d=e(g);else{var h=(0,z.clsx)("recharts-line-dot","boolean"!=typeof e?e.className:"");d=y.createElement(B.Dot,ao({},g,{className:h}))}return d}),n={clipPath:g?"url(#clipPath-".concat(j?"":"dots-").concat(b,")"):void 0};return y.createElement(C.Layer,ao({className:"recharts-line-dots",key:"dots"},n),m)}function as(a){var{showLabels:b,children:c,points:d}=a,e=(0,y.useMemo)(()=>null==d?void 0:d.map(a=>{var b={x:a.x,y:a.y,width:0,height:0};return am(am({},b),{},{value:a.value,payload:a.payload,viewBox:b,parentViewBox:void 0,fill:void 0})}),[d]);return y.createElement(D.CartesianLabelListContextProvider,{value:b?e:null},c)}function at(a){var{clipPathId:b,pathRef:c,points:d,strokeDasharray:e,props:f}=a,{type:g,layout:h,connectNulls:i,needClip:j}=f,k=an(f,aj),l=am(am({},(0,ag.svgPropertiesAndEvents)(k)),{},{fill:"none",className:"recharts-line-curve",clipPath:j?"url(#clipPath-".concat(b,")"):void 0,points:d,type:g,layout:h,connectNulls:i,strokeDasharray:null!=e?e:f.strokeDasharray});return y.createElement(y.Fragment,null,(null==d?void 0:d.length)>1&&y.createElement(A.Curve,ao({},l,{pathRef:c})),y.createElement(ar,{points:d,clipPathId:b,props:f}))}function au(a){var{clipPathId:b,props:c,pathRef:d,previousPointsRef:e,longestAnimatedLengthRef:f}=a,{points:g,strokeDasharray:h,isAnimationActive:i,animationBegin:j,animationDuration:k,animationEasing:l,animateNewValues:m,width:n,height:o,onAnimationEnd:p,onAnimationStart:q}=c,r=e.current,s=(0,_.useAnimationId)(c,"recharts-line-"),[t,u]=(0,y.useState)(!1),v=(0,y.useCallback)(()=>{"function"==typeof p&&p(),u(!1)},[p]),w=(0,y.useCallback)(()=>{"function"==typeof q&&q(),u(!0)},[q]),x=function(a){try{return a&&a.getTotalLength&&a.getTotalLength()||0}catch(a){return 0}}(d.current),z=f.current;return y.createElement(as,{points:g,showLabels:!t},c.children,y.createElement(af.JavascriptAnimate,{animationId:s,begin:j,duration:k,isActive:i,easing:l,onAnimationEnd:v,onAnimationStart:w,key:s},a=>{var j,k=Math.min((0,E.interpolate)(z,x+z,a),x);if(j=i?h?((a,b,c)=>{var d=c.reduce((a,b)=>a+b);if(!d)return aq(b,a);for(var e=Math.floor(a/d),f=a%d,g=b-a,h=[],i=0,j=0;i<c.length;j+=c[i],++i)if(j+c[i]>f){h=[...c.slice(0,i),f-j];break}var k=h.length%2==0?[0,g]:[g];return[...function(a,b){for(var c=a.length%2!=0?[...a,0]:a,d=[],e=0;e<b;++e)d=[...d,...c];return d}(c,e),...h,...k].map(a=>"".concat(a,"px")).join(", ")})(k,x,"".concat(h).split(/[,\s]+/gim).map(a=>parseFloat(a))):aq(x,k):null==h?void 0:String(h),r){var l=r.length/g.length,p=1===a?g:g.map((b,c)=>{var d=Math.floor(c*l);if(r[d]){var e=r[d];return am(am({},b),{},{x:(0,E.interpolate)(e.x,b.x,a),y:(0,E.interpolate)(e.y,b.y,a)})}return m?am(am({},b),{},{x:(0,E.interpolate)(2*n,b.x,a),y:(0,E.interpolate)(o/2,b.y,a)}):am(am({},b),{},{x:b.x,y:b.y})});return e.current=p,y.createElement(at,{props:c,points:p,clipPathId:b,pathRef:d,strokeDasharray:j})}return a>0&&x>0&&(e.current=g,f.current=k),y.createElement(at,{props:c,points:g,clipPathId:b,pathRef:d,strokeDasharray:j})}),y.createElement(D.LabelListFromLabelProp,{label:c.label}))}function av(a){var{clipPathId:b,props:c}=a,d=(0,y.useRef)(null),e=(0,y.useRef)(0),f=(0,y.useRef)(null);return y.createElement(au,{props:c,clipPathId:b,previousPointsRef:d,longestAnimatedLengthRef:e,pathRef:f})}var aw=(a,b)=>({x:a.x,y:a.y,value:a.value,errorVal:(0,H.getValueByDataKey)(a.payload,b)});class ax extends y.Component{render(){var{hide:a,dot:b,points:c,className:d,xAxisId:e,yAxisId:f,top:g,left:h,width:i,height:j,id:k,needClip:l}=this.props;if(a)return null;var m=(0,z.clsx)("recharts-line",d),{r:n,strokeWidth:o}=(0,ah.getRadiusAndStrokeWidthFromDot)(b),p=(0,F.isClipDot)(b),q=2*n+o;return y.createElement(y.Fragment,null,y.createElement(C.Layer,{className:m},l&&y.createElement("defs",null,y.createElement(L.GraphicalItemClipPath,{clipPathId:k,xAxisId:e,yAxisId:f}),!p&&y.createElement("clipPath",{id:"clipPath-dots-".concat(k)},y.createElement("rect",{x:h-q/2,y:g-q/2,width:i+q,height:j+q}))),y.createElement(K.SetErrorBarContext,{xAxisId:e,yAxisId:f,data:c,dataPointFormatter:aw,errorBarOffset:0},y.createElement(av,{props:this.props,clipPathId:k}))),y.createElement(I.ActivePoints,{activeDot:this.props.activeDot,points:c,mainColor:this.props.stroke,itemDataKey:this.props.dataKey}))}}var ay={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:!G.Global.isSsr,label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0};function az(a){var b=(0,aa.resolveDefaultProps)(a,ay),{activeDot:c,animateNewValues:d,animationBegin:e,animationDuration:f,animationEasing:g,connectNulls:h,dot:i,hide:j,isAnimationActive:k,label:l,legendType:m,xAxisId:n,yAxisId:o,id:p}=b,q=an(b,ak),{needClip:r}=(0,L.useNeedsClip)(n,o),s=(0,ab.usePlotArea)(),t=(0,M.useChartLayout)(),u=(0,N.useIsPanorama)(),v=(0,Z.useAppSelector)(a=>Y(a,n,o,u,p));if("horizontal"!==t&&"vertical"!==t||null==v||null==s)return null;var{height:w,width:x,x:z,y:A}=s;return y.createElement(ax,ao({},q,{id:p,connectNulls:h,dot:i,activeDot:c,animateNewValues:d,animationBegin:e,animationDuration:f,animationEasing:g,isAnimationActive:k,hide:j,label:l,legendType:m,xAxisId:n,yAxisId:o,points:v,layout:t,height:w,width:x,left:z,top:A,needClip:r}))}var aA=y.memo(function(a){var b=(0,aa.resolveDefaultProps)(a,ay),c=(0,N.useIsPanorama)();return y.createElement(ac.RegisterGraphicalItemId,{id:b.id,type:"line"},a=>y.createElement(y.Fragment,null,y.createElement($.SetLegendPayload,{legendPayload:(a=>{var{dataKey:b,name:c,stroke:d,legendType:e,hide:f}=a;return[{inactive:f,dataKey:b,type:e,color:d,value:(0,H.getTooltipNameProp)(c,b),payload:a}]})(b)}),y.createElement(J.SetTooltipEntrySettings,{fn:ap,args:b}),y.createElement(ad.SetCartesianGraphicalItem,{type:"line",id:a,data:b.data,xAxisId:b.xAxisId,yAxisId:b.yAxisId,zAxisId:0,dataKey:b.dataKey,hide:b.hide,isPanorama:c}),y.createElement(az,ao({},b,{id:a}))))});aA.displayName="Line";var aB=a.i(554),aC=a.i(31760),aD=["axis"],aE=(0,i.forwardRef)((a,b)=>i.createElement(aC.CartesianChart,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:aD,tooltipPayloadSearcher:aB.arrayTooltipSearcher,categoricalChartProps:a,ref:b})),aF=a.i(54419),aG=a.i(58042),aH=a.i(94222),aI=a.i(74016);function aJ(){let a=(0,i.useMemo)(()=>{let a=x.generateMockData.accounting(90),b=new Map;return a.forEach(a=>{var c;let d,e=(c=new Date(a.date),(d=(0,aI.toDate)(c,void 0)).setDate(1),d.setHours(0,0,0,0),d),f=(0,q.format)(e,"MMM yyyy",{locale:r.es});b.has(f)||b.set(f,{income:0,expenses:0,net:0});let g=b.get(f);"Ingreso"===a.type?g.income+=a.amount:g.expenses+=a.amount,g.net=g.income-g.expenses}),Array.from(b.entries()).map(([a,b])=>({month:a,ingresos:b.income,egresos:b.expenses,neto:b.net})).slice(-6)},[]);return(0,b.jsxs)(e.Card,{children:[(0,b.jsxs)(e.CardHeader,{children:[(0,b.jsx)(e.CardTitle,{children:"Tendencia Financiera"}),(0,b.jsx)(e.CardDescription,{children:"Ingresos, egresos y balance neto mensual"})]}),(0,b.jsx)(e.CardContent,{children:(0,b.jsx)(w.ChartContainer,{config:{ingresos:{label:"Ingresos",color:"hsl(var(--chart-2))"},egresos:{label:"Egresos",color:"hsl(var(--chart-3))"},neto:{label:"Neto",color:"hsl(var(--chart-1))"}},className:"h-[350px] w-full",children:(0,b.jsxs)(aE,{data:a,margin:{top:10,right:10,left:0,bottom:0},children:[(0,b.jsx)(aF.CartesianGrid,{strokeDasharray:"3 3",vertical:!1}),(0,b.jsx)(aG.XAxis,{dataKey:"month",tickLine:!1,axisLine:!1,tickMargin:8}),(0,b.jsx)(aH.YAxis,{tickLine:!1,axisLine:!1,tickMargin:8,tickFormatter:a=>`$${a/1e3}k`}),(0,b.jsx)(w.ChartTooltip,{content:(0,b.jsx)(w.ChartTooltipContent,{})}),(0,b.jsx)(aA,{type:"monotone",dataKey:"ingresos",stroke:"var(--color-ingresos)",strokeWidth:2,dot:{r:4}}),(0,b.jsx)(aA,{type:"monotone",dataKey:"egresos",stroke:"var(--color-egresos)",strokeWidth:2,dot:{r:4}}),(0,b.jsx)(aA,{type:"monotone",dataKey:"neto",stroke:"var(--color-neto)",strokeWidth:3,dot:{r:5}})]})})})]})}var aK=a.i(46893),aL=a.i(3183),aM=a.i(19966),aN=a.i(1484),aO=a.i(90166),aP=a.i(24669);let aQ=(0,m.default)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),aR=(0,m.default)("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);var aS=a.i(86297);function aT(){let{getUserId:a,getClinicId:e}=(0,aL.useAuth)(),{showSuccess:g,showError:j,showWarning:k,AlertContainer:l}=(0,aN.useAlertToast)(),[m,n]=(0,i.useState)([]),[o,p]=(0,i.useState)([]),[q,r]=(0,i.useState)([]),[w,x]=(0,i.useState)(!0),[y,z]=(0,i.useState)(!1),[A,B]=(0,i.useState)(null),[C,D]=(0,i.useState)(null),[E,F]=(0,i.useState)({type:"",category:"",amount:"",description:"",date:""});(0,i.useEffect)(()=>{let b=a(),c=e();b&&c&&(G(),H())},[a,e]);let G=async()=>{try{x(!0);let b=a(),c=e(),d=await fetch(`/api/accounting?userId=${b}&clinicId=${c}`),f=await d.json();f.success?(n(f.data),p(f.data)):j(f.error||"Error al cargar registros")}catch(a){console.error("Error fetching accounting:",a),j("Error al cargar los registros")}finally{x(!1)}},H=async()=>{try{let a=await fetch("/api/conta-categories"),b=await a.json();b.success?r(b.data):k("No se pudieron cargar las categorías")}catch(a){console.error("Error fetching categories:",a)}},I=async b=>{if(confirm("¿Estás seguro de eliminar este registro?"))try{let c=a(),d=e(),f=await fetch(`/api/accounting?id=${b}&userId=${c}&clinicId=${d}`,{method:"DELETE"}),h=await f.json();h.success?(g("Registro eliminado exitosamente"),await G()):j(h.error||"Error al eliminar el registro")}catch(a){console.error("Error deleting record:",a),j("Error al eliminar el registro")}},J=async b=>{if(b.preventDefault(),!E.type||!E.category||!E.amount)return void k("Por favor completa todos los campos requeridos");try{let b=A?"PUT":"POST",c=a(),d=e(),f=A?{type:E.type,categoryId:E.category,amount:E.amount,description:E.description,date:E.date,id:A.id,userId:c,clinicId:d}:{type:E.type,categoryId:E.category,amount:E.amount,description:E.description,date:E.date,userId:c,clinicId:d},h=await fetch("/api/accounting",{method:b,headers:{"Content-Type":"application/json"},body:JSON.stringify(f)}),i=await h.json();i.success?(g(A?"Registro actualizado exitosamente":"Registro agregado exitosamente"),z(!1),await G()):j(i.error||"Error al guardar el registro")}catch(a){console.error("Error saving record:",a),j("Error al guardar el registro")}},K=(a,b)=>{F(c=>({...c,[a]:b}))},L=a=>{D(a),a?p(m.filter(b=>b.type===a)):p(m)};if(w)return(0,b.jsx)(aM.LoadingPage,{message:"Cargando registros contables..."});let M=a(),N=e();if(!M||!N)return(0,b.jsx)("div",{className:"p-8",children:"Por favor selecciona un consultorio"});let O=m.filter(a=>"Ingreso"===a.type).reduce((a,b)=>a+Number.parseFloat(b.amount||0),0),P=m.filter(a=>"Egreso"===a.type).reduce((a,b)=>a+Number.parseFloat(b.amount||0),0),Q=O-P,R=m.length;return(0,b.jsxs)("div",{className:"p-8",children:[(0,b.jsx)(l,{}),(0,b.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Contabilidad"}),(0,b.jsxs)(d.Button,{onClick:()=>{B(null),F({type:"",category:"",amount:"",description:"",date:new Date().toISOString().split("T")[0]}),z(!0)},className:"btn-primary",children:[(0,b.jsx)(c.Plus,{className:"w-4 h-4 mr-2"}),"Nuevo Registro"]})]}),(0,b.jsxs)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4 mb-6",children:[(0,b.jsx)(v.StatsCard,{title:"Ingresos Totales",subtitle:"Total de entradas",value:(0,aS.formatCurrency)(O),icon:aP.TrendingUp,trend:{value:0,isPositive:!0},onClick:()=>L("Ingreso"),isActive:"Ingreso"===C,variant:"success"}),(0,b.jsx)(v.StatsCard,{title:"Egresos Totales",subtitle:"Total de salidas",value:(0,aS.formatCurrency)(P),icon:aQ,trend:{value:0,isPositive:!1},onClick:()=>L("Egreso"),isActive:"Egreso"===C,variant:"danger"}),(0,b.jsx)(v.StatsCard,{title:"Balance",subtitle:"Ganancia/Pérdida neta",value:(0,aS.formatCurrency)(Q),icon:aO.DollarSign,trend:{value:0,isPositive:Q>=0},variant:Q>=0?"success":"danger"}),(0,b.jsx)(v.StatsCard,{title:"Transacciones",subtitle:"Registros totales",value:R,icon:aR,trend:{value:0,isPositive:!0},onClick:()=>L(null),isActive:null===C})]}),(0,b.jsx)(aJ,{accounting:m}),(0,b.jsx)("br",{}),(0,b.jsx)(u,{accounting:o,onEdit:a=>{B(a),F({type:a.type||"",category:a.categoryId?.toString()||"",amount:a.amount||"",description:a.description||"",date:a.date||""}),z(!0)},onDelete:I,onSearch:a=>{p(m.filter(b=>(b.category?.toLowerCase()||"").includes(a.toLowerCase())||(b.description?.toLowerCase()||"").includes(a.toLowerCase())))}}),(0,b.jsx)(s.Dialog,{open:y,onOpenChange:z,children:(0,b.jsxs)(s.DialogContent,{className:"max-w-2xl",children:[(0,b.jsx)(s.DialogHeader,{children:(0,b.jsx)(s.DialogTitle,{children:A?"Editar Registro":"Agregar Nuevo Registro"})}),(0,b.jsxs)("form",{onSubmit:J,className:"grid gap-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(t.Label,{htmlFor:"type",children:"Tipo *"}),(0,b.jsxs)(h.Select,{value:E.type,onValueChange:a=>K("type",a),children:[(0,b.jsx)(h.SelectTrigger,{children:(0,b.jsx)(h.SelectValue,{placeholder:"Seleccionar"})}),(0,b.jsxs)(h.SelectContent,{children:[(0,b.jsx)(h.SelectItem,{value:"Ingreso",children:"Ingreso"}),(0,b.jsx)(h.SelectItem,{value:"Egreso",children:"Egreso"})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(t.Label,{htmlFor:"category",children:"Categoría *"}),(0,b.jsxs)(h.Select,{value:E.category,onValueChange:a=>K("category",a),children:[(0,b.jsx)(h.SelectTrigger,{children:(0,b.jsx)(h.SelectValue,{placeholder:"Seleccionar"})}),(0,b.jsx)(h.SelectContent,{children:q.map(a=>(0,b.jsx)(h.SelectItem,{value:a.id.toString(),children:a.name},a.id))})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(t.Label,{htmlFor:"amount",children:"Monto *"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground",children:"$"}),(0,b.jsx)(f.Input,{id:"amount",value:E.amount,onChange:a=>{var b;let c;return b=a.target.value,void((""===(c=(0,aS.parseCurrency)(b))||/^\d*\.?\d{0,2}$/.test(c))&&K("amount",c))},placeholder:"0.00",className:"pl-7",required:!0})]}),E.amount&&(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:(0,aS.formatCurrency)(E.amount)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(t.Label,{htmlFor:"date",children:"Fecha"}),(0,b.jsx)(f.Input,{id:"date",type:"date",value:E.date,onChange:a=>K("date",a.target.value)})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(t.Label,{htmlFor:"description",children:"Descripción"}),(0,b.jsx)(aK.Textarea,{id:"description",value:E.description,onChange:a=>K("description",a.target.value),rows:3})]}),(0,b.jsxs)(s.DialogFooter,{children:[(0,b.jsx)(d.Button,{type:"button",variant:"outline",onClick:()=>z(!1),children:"Cancelar"}),(0,b.jsx)(d.Button,{type:"submit",className:"btn-primary",children:A?"Actualizar":"Guardar"})]})]})]})})]})}a.s(["default",()=>aT],15090)}];

//# sourceMappingURL=app_contabilidad_page_jsx_1dbf3b10._.js.map