module.exports=[88528,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(15618),e=a.i(40695),f=a.i(70106);let g=(0,f.default)("Dog",[["path",{d:"M11.25 16.25h1.5L12 17z",key:"w7jh35"}],["path",{d:"M16 14v.5",key:"1lajdz"}],["path",{d:"M4.42 11.247A13.152 13.152 0 0 0 4 14.556C4 18.728 7.582 21 12 21s8-2.272 8-6.444a11.702 11.702 0 0 0-.493-3.309",key:"u7s9ue"}],["path",{d:"M8 14v.5",key:"1nzgdb"}],["path",{d:"M8.5 8.5c-.384 1.05-1.083 2.028-2.344 2.5-1.931.722-3.576-.297-3.656-1-.113-.994 1.177-6.53 4-7 1.923-.321 3.651.845 3.651 2.235A7.497 7.497 0 0 1 14 5.277c0-1.39 1.844-2.598 3.767-2.277 2.823.47 4.113 6.006 4 7-.08.703-1.725 1.722-3.656 1-1.261-.472-1.855-1.45-2.239-2.5",key:"v8hric"}]]),h=(0,f.default)("Cat",[["path",{d:"M12 5c.67 0 1.35.09 2 .26 1.78-2 5.03-2.84 6.42-2.26 1.4.58-.42 7-.42 7 .57 1.07 1 2.24 1 3.44C21 17.9 16.97 21 12 21s-9-3-9-7.56c0-1.25.5-2.4 1-3.44 0 0-1.89-6.42-.5-7 1.39-.58 4.72.23 6.5 2.23A9.04 9.04 0 0 1 12 5Z",key:"x6xyqk"}],["path",{d:"M8 14v.5",key:"1nzgdb"}],["path",{d:"M16 14v.5",key:"1lajdz"}],["path",{d:"M11.25 16.25h1.5L12 17l-.75-.75Z",key:"12kq1m"}]]),i=(0,f.default)("Bird",[["path",{d:"M16 7h.01",key:"1kdx03"}],["path",{d:"M3.4 18H12a8 8 0 0 0 8-8V7a4 4 0 0 0-7.28-2.3L2 20",key:"oj1oa8"}],["path",{d:"m20 7 2 .5-2 .5",key:"12nv4d"}],["path",{d:"M10 18v3",key:"1yea0a"}],["path",{d:"M14 17.75V21",key:"1pymcb"}],["path",{d:"M7 18a6 6 0 0 0 3.84-10.61",key:"1npnn0"}]]),j=(0,f.default)("Rabbit",[["path",{d:"M13 16a3 3 0 0 1 2.24 5",key:"1epib5"}],["path",{d:"M18 12h.01",key:"yjnet6"}],["path",{d:"M18 21h-8a4 4 0 0 1-4-4 7 7 0 0 1 7-7h.2L9.6 6.4a1 1 0 1 1 2.8-2.8L15.8 7h.2c3.3 0 6 2.7 6 6v1a2 2 0 0 1-2 2h-1a3 3 0 0 0-3 3",key:"ue9ozu"}],["path",{d:"M20 8.54V4a2 2 0 1 0-4 0v3",key:"49iql8"}],["path",{d:"M7.612 12.524a3 3 0 1 0-1.6 4.3",key:"1e33i0"}]]);var k=a.i(17493);function l({patients:a,onFilterClick:c,activeFilter:d}){let e=a.length,f=a.filter(a=>"Perro"===a.species).length,l=a.filter(a=>"Gato"===a.species).length,m=a.filter(a=>"Ave"===a.species).length,n=a.filter(a=>!["Perro","Gato","Ave"].includes(a.species)).length;return(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6 mb-6",children:[{label:"Total Pacientes",value:e,icon:g,color:"text-primary",filter:null,subtitle:"Registrados en el sistema"},{label:"Perros",value:f,icon:g,color:"text-accent",filter:"Perro",subtitle:"Pacientes caninos"},{label:"Gatos",value:l,icon:h,color:"text-accent",filter:"Gato",subtitle:"Pacientes felinos"},{label:"Aves",value:m,icon:i,color:"text-accent",filter:"Ave",subtitle:"Pacientes aviares"},{label:"Otros",value:n,icon:j,color:"text-muted-foreground",filter:"Otros",subtitle:"Otras especies"}].map(a=>{let e=a.icon,f=d===a.filter;return(0,b.jsx)(k.StatsCard,{label:a.label,value:a.value,icon:e,color:a.color,isActive:f,onClick:()=>c(a.filter),subtitle:a.subtitle},a.label)})})}var m=a.i(50944),n=a.i(3130),o=a.i(5522),p=a.i(87532),q=a.i(24569),r=a.i(81560),s=a.i(4720),t=a.i(88237);function u({patients:a,onEdit:d,onDelete:f,onSearch:g}){let[h,i]=(0,c.useState)(""),j=(0,m.useRouter)();return(0,b.jsxs)(n.Card,{className:"p-6",children:[(0,b.jsx)("div",{className:"flex items-center gap-4 mb-6",children:(0,b.jsxs)("div",{className:"relative flex-1",children:[(0,b.jsx)(p.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),(0,b.jsx)(o.Input,{placeholder:"Buscar por nombre, dueño o tipo de animal...",value:h,onChange:a=>{let b=a.target.value;i(b),g(b)},className:"pl-10"})]})}),(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)(t.Table,{children:[(0,b.jsx)(t.TableHeader,{children:(0,b.jsxs)(t.TableRow,{children:[(0,b.jsx)(t.TableHead,{children:"ID"}),(0,b.jsx)(t.TableHead,{children:"Nombre"}),(0,b.jsx)(t.TableHead,{children:"Tipo"}),(0,b.jsx)(t.TableHead,{children:"Raza"}),(0,b.jsx)(t.TableHead,{children:"Edad"}),(0,b.jsx)(t.TableHead,{children:"Peso"}),(0,b.jsx)(t.TableHead,{children:"Dueño"}),(0,b.jsx)(t.TableHead,{children:"Teléfono"}),(0,b.jsx)(t.TableHead,{children:"Última Visita"}),(0,b.jsx)(t.TableHead,{className:"text-right",children:"Acciones"})]})}),(0,b.jsx)(t.TableBody,{children:0===a.length?(0,b.jsx)(t.TableRow,{children:(0,b.jsx)(t.TableCell,{colSpan:10,className:"text-center text-muted-foreground",children:"No se encontraron pacientes"})}):a.map(a=>(0,b.jsxs)(t.TableRow,{children:[(0,b.jsx)(t.TableCell,{className:"font-medium",children:a.id}),(0,b.jsx)(t.TableCell,{children:a.name}),(0,b.jsx)(t.TableCell,{children:a.animalType}),(0,b.jsx)(t.TableCell,{children:a.breed}),(0,b.jsxs)(t.TableCell,{children:[a.age," años"]}),(0,b.jsxs)(t.TableCell,{children:[a.weight," kg"]}),(0,b.jsx)(t.TableCell,{children:a.ownerName}),(0,b.jsx)(t.TableCell,{children:a.ownerPhone}),(0,b.jsx)(t.TableCell,{children:new Date(a.lastVisit).toLocaleDateString("es-MX")}),(0,b.jsx)(t.TableCell,{className:"text-right",children:(0,b.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,b.jsx)(e.Button,{variant:"ghost",size:"sm",onClick:()=>j.push(`/kardex/${a.id}`),title:"Ver Kardex",children:(0,b.jsx)(s.FileText,{className:"w-4 h-4"})}),(0,b.jsx)(e.Button,{variant:"ghost",size:"sm",onClick:()=>d(a),children:(0,b.jsx)(q.Edit,{className:"w-4 h-4"})}),(0,b.jsx)(e.Button,{variant:"ghost",size:"sm",onClick:()=>f(a.id),children:(0,b.jsx)(r.Trash2,{className:"w-4 h-4 text-destructive"})})]})})]},a.id))})]})})]})}var v=a.i(65733),w=a.i(17171),x=a.i(87682),y=a.i(46893),z=a.i(3183),A=a.i(19966),B=a.i(1484);function C(){let{user:a,selectedClinic:f,getUserId:g,getClinicId:h}=(0,z.useAuth)(),{showSuccess:i,showError:j,showWarning:k,AlertContainer:m}=(0,B.useAlertToast)(),[n,p]=(0,c.useState)([]),[q,r]=(0,c.useState)([]),[s,t]=(0,c.useState)([]),[C,D]=(0,c.useState)(!0),[E,F]=(0,c.useState)(!1),[G,H]=(0,c.useState)(null),[I,J]=(0,c.useState)(null),[K,L]=(0,c.useState)({name:"",species:"",breed:"",age:"",weight:"",sex:"",owner:"",color:"",medicalHistory:"",allergies:""});(0,c.useEffect)(()=>{g()&&h()&&(M(),N())},[a,f]);let M=async()=>{try{D(!0);let a=await fetch(`/api/patients?userId=${g()}&clinicId=${h()}`),b=await a.json();b.success?(p(b.data),r(b.data)):j(b.error||"Error al cargar pacientes")}catch(a){console.error("Error fetching patients:",a),j("Error al cargar los pacientes")}finally{D(!1)}},N=async()=>{try{let a=await fetch("/api/species"),b=await a.json();b.success?t(b.data):k("No se pudieron cargar las especies")}catch(a){console.error("Error fetching species:",a)}},O=async a=>{if(confirm("¿Estás seguro de eliminar este paciente?"))try{let b=await fetch(`/api/patients?id=${a}&userId=${g()}&clinicId=${h()}`,{method:"DELETE"}),c=await b.json();c.success?(i("Paciente eliminado exitosamente"),await M()):j(c.error||"Error al eliminar el paciente")}catch(a){console.error("Error deleting patient:",a),j("Error al eliminar el paciente")}},P=async a=>{if(a.preventDefault(),!K.name||!K.species||!K.owner)return void k("Por favor completa todos los campos requeridos");try{let a=G?"PUT":"POST",b=G?{name:K.name,speciesId:K.species,breed:K.breed,age:K.age,weight:K.weight,sex:K.sex,owner:K.owner,color:K.color,medicalHistory:K.medicalHistory,allergies:K.allergies,id:G.id,userId:g(),clinicId:h()}:{name:K.name,speciesId:K.species,breed:K.breed,age:K.age,weight:K.weight,sex:K.sex,owner:K.owner,color:K.color,medicalHistory:K.medicalHistory,allergies:K.allergies,userId:g(),clinicId:h()},c=await fetch("/api/patients",{method:a,headers:{"Content-Type":"application/json"},body:JSON.stringify(b)}),d=await c.json();d.success?(i(G?"Paciente actualizado exitosamente":"Paciente agregado exitosamente"),F(!1),await M()):j(d.error||"Error al guardar el paciente")}catch(a){console.error("Error saving patient:",a),j("Error al guardar el paciente")}},Q=(a,b)=>{L(c=>({...c,[a]:b}))};return C?(0,b.jsx)(A.LoadingPage,{message:"Cargando pacientes..."}):g()&&h()?(0,b.jsxs)("div",{className:"p-8",children:[(0,b.jsx)(m,{}),(0,b.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Pacientes"}),(0,b.jsxs)(e.Button,{onClick:()=>{H(null),L({name:"",species:"",breed:"",age:"",weight:"",sex:"",owner:"",color:"",medicalHistory:"",allergies:""}),F(!0)},className:"btn-primary",children:[(0,b.jsx)(d.Plus,{className:"w-4 h-4 mr-2"}),"Agregar Paciente"]})]}),(0,b.jsx)(l,{patients:n,onFilterClick:a=>{J(a),a?r(n.filter(b=>b.species===a)):r(n)},activeFilter:I}),(0,b.jsx)(u,{patients:q,onEdit:a=>{H(a),L({name:a.name||"",species:a.species_id.toString()||"",breed:a.breed||"",age:a.age||"",weight:a.weight||"",sex:a.sex||"",owner:a.owner||"",color:a.color||"",medicalHistory:a.medical_history||"",allergies:a.allergies||""}),F(!0)},onDelete:O,onSearch:a=>{r(n.filter(b=>b.name.toLowerCase().includes(a.toLowerCase())||b.owner.toLowerCase().includes(a.toLowerCase())||b.species.toLowerCase().includes(a.toLowerCase())))}}),(0,b.jsx)(v.Dialog,{open:E,onOpenChange:F,children:(0,b.jsxs)(v.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsx)(v.DialogHeader,{children:(0,b.jsx)(v.DialogTitle,{children:G?"Editar Paciente":"Agregar Nuevo Paciente"})}),(0,b.jsxs)("form",{onSubmit:P,className:"grid gap-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(w.Label,{htmlFor:"name",children:"Nombre *"}),(0,b.jsx)(o.Input,{id:"name",value:K.name,onChange:a=>Q("name",a.target.value),required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(w.Label,{htmlFor:"species",children:"Especie *"}),(0,b.jsxs)(x.Select,{value:K.species,onValueChange:a=>Q("species",a),children:[(0,b.jsx)(x.SelectTrigger,{children:(0,b.jsx)(x.SelectValue,{placeholder:"Seleccionar"})}),(0,b.jsx)(x.SelectContent,{children:s.map(a=>(0,b.jsx)(x.SelectItem,{value:a.id.toString(),children:a.name},a.id))})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(w.Label,{htmlFor:"breed",children:"Raza"}),(0,b.jsx)(o.Input,{id:"breed",value:K.breed,onChange:a=>Q("breed",a.target.value)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(w.Label,{htmlFor:"age",children:"Edad (años)"}),(0,b.jsx)(o.Input,{id:"age",type:"number",value:K.age,onChange:a=>Q("age",a.target.value),onKeyPress:a=>{/[0-9]/.test(a.key)||a.preventDefault()}})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(w.Label,{htmlFor:"weight",children:"Peso (kg)"}),(0,b.jsx)(o.Input,{id:"weight",type:"number",step:"0.1",value:K.weight,onChange:a=>Q("weight",a.target.value),onKeyPress:a=>{/[0-9.]/.test(a.key)||a.preventDefault()}})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(w.Label,{htmlFor:"sex",children:"Sexo"}),(0,b.jsxs)(x.Select,{value:K.sex,onValueChange:a=>Q("sex",a),children:[(0,b.jsx)(x.SelectTrigger,{children:(0,b.jsx)(x.SelectValue,{placeholder:"Seleccionar"})}),(0,b.jsxs)(x.SelectContent,{children:[(0,b.jsx)(x.SelectItem,{value:"Macho",children:"Macho"}),(0,b.jsx)(x.SelectItem,{value:"Hembra",children:"Hembra"})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(w.Label,{htmlFor:"owner",children:"Nombre del Dueño *"}),(0,b.jsx)(o.Input,{id:"owner",value:K.owner,onChange:a=>Q("owner",a.target.value),required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(w.Label,{htmlFor:"color",children:"Color"}),(0,b.jsx)(o.Input,{id:"color",value:K.color,onChange:a=>Q("color",a.target.value)})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(w.Label,{htmlFor:"medicalHistory",children:"Historial Médico"}),(0,b.jsx)(y.Textarea,{id:"medicalHistory",value:K.medicalHistory,onChange:a=>Q("medicalHistory",a.target.value),rows:3})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(w.Label,{htmlFor:"allergies",children:"Alergias"}),(0,b.jsx)(y.Textarea,{id:"allergies",value:K.allergies,onChange:a=>Q("allergies",a.target.value),rows:2})]}),(0,b.jsxs)(v.DialogFooter,{children:[(0,b.jsx)(e.Button,{type:"button",variant:"outline",onClick:()=>F(!1),children:"Cancelar"}),(0,b.jsx)(e.Button,{type:"submit",className:"btn-primary",children:G?"Actualizar":"Guardar"})]})]})]})})]}):(0,b.jsx)("div",{className:"p-8",children:"Por favor selecciona un consultorio"})}a.s(["default",()=>C],88528)}];

//# sourceMappingURL=app_pacientes_page_jsx_e4fb84d6._.js.map