{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 136, "column": 0}, "map": {"version":3,"sources":["file:///C:/Proyectos/Veterinarios/myvetadmin/lib/db-landing.js"],"sourcesContent":["import mysql from \"mysql2/promise\"\r\n\r\nlet pool\r\n\r\nexport function getConnection() {\r\n  if (!pool) {\r\n    pool = mysql.createPool({\r\n        host: process.env.DB_HOST || \"174.136.31.150\",\r\n        user: process.env.DB_USER || \"mavishop_myvetadmin\",\r\n        password: process.env.DB_PASSWORD || \"KDZ-2y_O#cmI^v7r\",\r\n        database: process.env.DB_NAME || \"mavishop_myvetadmin\",\r\n        waitForConnections: true,\r\n        connectionLimit: 10,\r\n        queueLimit: 0,\r\n        enableKeepAlive: true,\r\n        keepAliveInitialDelay: 0,\r\n    })\r\n  }\r\n  return pool\r\n}\r\n\r\nexport async function query(sql, params) {\r\n  const connection = getConnection()\r\n  try {\r\n    const [results] = await connection.execute(sql, params)\r\n    return results\r\n  } catch (error) {\r\n    console.error(\"[v0] Database query error:\", error)\r\n    throw error\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;;;AAAA;;AAEA,IAAI;AAEG,SAAS;IACd,IAAI,CAAC,MAAM;QACT,OAAO,8IAAK,CAAC,UAAU,CAAC;YACpB,MAAM,QAAQ,GAAG,CAAC,OAAO,IAAI;YAC7B,MAAM,QAAQ,GAAG,CAAC,OAAO,IAAI;YAC7B,UAAU,QAAQ,GAAG,CAAC,WAAW,IAAI;YACrC,UAAU,QAAQ,GAAG,CAAC,OAAO,IAAI;YACjC,oBAAoB;YACpB,iBAAiB;YACjB,YAAY;YACZ,iBAAiB;YACjB,uBAAuB;QAC3B;IACF;IACA,OAAO;AACT;AAEO,eAAe,MAAM,GAAG,EAAE,MAAM;IACrC,MAAM,aAAa;IACnB,IAAI;QACF,MAAM,CAAC,QAAQ,GAAG,MAAM,WAAW,OAAO,CAAC,KAAK;QAChD,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,8BAA8B;QAC5C,MAAM;IACR;AACF","debugId":null}},
    {"offset": {"line": 175, "column": 0}, "map": {"version":3,"sources":["file:///C:/Proyectos/Veterinarios/myvetadmin/app/api/plans/route.js"],"sourcesContent":["import { NextResponse } from \"next/server\"\r\nimport { Stripe } from \"stripe\"\r\nimport { query } from \"@/lib/db-landing\"\r\n\r\nexport async function GET() {\r\n  try {\r\n    console.log(\"[v0] Fetching subscription plans from database\")\r\n\r\n    const stripe = new Stripe(process.env.STRIPE_SECRET_KEY);\r\n    const prices = await stripe.prices.list();\r\n    console.log('Precios planes', prices)\r\n\r\n    const plans = await query(\r\n      `SELECT * FROM subscription_plans \r\n       WHERE is_active = TRUE \r\n       ORDER BY display_order ASC, price_monthly ASC`,\r\n      [],\r\n    )\r\n\r\n    console.log(\"[v0] Plans found:\", plans.length)\r\n\r\n    // Parse JSON features\r\n    const parsedPlans = plans.map((plan) => ({\r\n      ...plan,\r\n      features: typeof plan.features === \"string\" ? JSON.parse(plan.features) : plan.features,\r\n    }))\r\n\r\n    return NextResponse.json({ plans: parsedPlans })\r\n  } catch (error) {\r\n    console.error(\"[v0] Error fetching plans:\", error)\r\n    return NextResponse.json({ error: \"Error al cargar planes\", plans: [] }, { status: 500 })\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAEO,eAAe;IACpB,IAAI;QACF,QAAQ,GAAG,CAAC;QAEZ,MAAM,SAAS,IAAI,kKAAM,CAAC,QAAQ,GAAG,CAAC,iBAAiB;QACvD,MAAM,SAAS,MAAM,OAAO,MAAM,CAAC,IAAI;QACvC,QAAQ,GAAG,CAAC,kBAAkB;QAE9B,MAAM,QAAQ,MAAM,IAAA,+HAAK,EACvB,CAAC;;oDAE6C,CAAC,EAC/C,EAAE;QAGJ,QAAQ,GAAG,CAAC,qBAAqB,MAAM,MAAM;QAE7C,sBAAsB;QACtB,MAAM,cAAc,MAAM,GAAG,CAAC,CAAC,OAAS,CAAC;gBACvC,GAAG,IAAI;gBACP,UAAU,OAAO,KAAK,QAAQ,KAAK,WAAW,KAAK,KAAK,CAAC,KAAK,QAAQ,IAAI,KAAK,QAAQ;YACzF,CAAC;QAED,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAY;IAChD,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,8BAA8B;QAC5C,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;YAA0B,OAAO,EAAE;QAAC,GAAG;YAAE,QAAQ;QAAI;IACzF;AACF","debugId":null}}]
}