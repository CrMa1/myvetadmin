{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 118, "column": 0}, "map": {"version":3,"sources":["file:///C:/Veterinarios/myvetadmin/lib/db.js"],"sourcesContent":["import mysql from \"mysql2/promise\"\n\n// Configuración de la conexión a la base de datos\nconst dbConfig = {\n  host: process.env.DB_HOST || \"174.136.31.150\",\n  user: process.env.DB_USER || \"mavishop_myvetadmin\",\n  password: process.env.DB_PASSWORD || \"KDZ-2y_O#cmI^v7r\",\n  database: process.env.DB_NAME || \"mavishop_myvetadmin\",\n  waitForConnections: true,\n  connectionLimit: 10,\n  queueLimit: 0,\n  enableKeepAlive: true,\n  keepAliveInitialDelay: 0,\n}\n\n// Pool de conexiones para mejor rendimiento\nlet pool\n\nexport async function getConnection() {\n  if (!pool) {\n    pool = mysql.createPool(dbConfig)\n  }\n  return pool\n}\n\nexport async function query(sql, params) {\n  const connection = await getConnection()\n  try {\n    const [results] = await connection.execute(sql, params)\n    return results\n  } catch (error) {\n    console.error(\"Database query error:\", error)\n    throw error\n  }\n}\n\nexport default { getConnection, query }\n"],"names":[],"mappings":";;;;;;;;AAAA;;AAEA,kDAAkD;AAClD,MAAM,WAAW;IACf,MAAM,QAAQ,GAAG,CAAC,OAAO,IAAI;IAC7B,MAAM,QAAQ,GAAG,CAAC,OAAO,IAAI;IAC7B,UAAU,QAAQ,GAAG,CAAC,WAAW,IAAI;IACrC,UAAU,QAAQ,GAAG,CAAC,OAAO,IAAI;IACjC,oBAAoB;IACpB,iBAAiB;IACjB,YAAY;IACZ,iBAAiB;IACjB,uBAAuB;AACzB;AAEA,4CAA4C;AAC5C,IAAI;AAEG,eAAe;IACpB,IAAI,CAAC,MAAM;QACT,OAAO,8IAAK,CAAC,UAAU,CAAC;IAC1B;IACA,OAAO;AACT;AAEO,eAAe,MAAM,GAAG,EAAE,MAAM;IACrC,MAAM,aAAa,MAAM;IACzB,IAAI;QACF,MAAM,CAAC,QAAQ,GAAG,MAAM,WAAW,OAAO,CAAC,KAAK;QAChD,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,yBAAyB;QACvC,MAAM;IACR;AACF;uCAEe;IAAE;IAAe;AAAM","debugId":null}},
    {"offset": {"line": 166, "column": 0}, "map": {"version":3,"sources":["file:///C:/Veterinarios/myvetadmin/contexts/auth-context.jsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const AuthProvider = registerClientReference(\n    function() { throw new Error(\"Attempted to call AuthProvider() from the server but AuthProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/contexts/auth-context.jsx <module evaluation>\",\n    \"AuthProvider\",\n);\nexport const useAuth = registerClientReference(\n    function() { throw new Error(\"Attempted to call useAuth() from the server but useAuth is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/contexts/auth-context.jsx <module evaluation>\",\n    \"useAuth\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;;;AACvE;;AACO,MAAM,eAAe,IAAA,0QAAuB,EAC/C;IAAa,MAAM,IAAI,MAAM;AAAwO,GACrQ,2DACA;AAEG,MAAM,UAAU,IAAA,0QAAuB,EAC1C;IAAa,MAAM,IAAI,MAAM;AAA8N,GAC3P,2DACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 185, "column": 0}, "map": {"version":3,"sources":["file:///C:/Veterinarios/myvetadmin/contexts/auth-context.jsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const AuthProvider = registerClientReference(\n    function() { throw new Error(\"Attempted to call AuthProvider() from the server but AuthProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/contexts/auth-context.jsx\",\n    \"AuthProvider\",\n);\nexport const useAuth = registerClientReference(\n    function() { throw new Error(\"Attempted to call useAuth() from the server but useAuth is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/contexts/auth-context.jsx\",\n    \"useAuth\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;;;AACvE;;AACO,MAAM,eAAe,IAAA,0QAAuB,EAC/C;IAAa,MAAM,IAAI,MAAM;AAAwO,GACrQ,uCACA;AAEG,MAAM,UAAU,IAAA,0QAAuB,EAC1C;IAAa,MAAM,IAAI,MAAM;AAA8N,GAC3P,uCACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 204, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 212, "column": 0}, "map": {"version":3,"sources":["file:///C:/Veterinarios/myvetadmin/app/api/patients/route.js"],"sourcesContent":["import { NextResponse } from \"next/server\"\nimport { query } from \"@/lib/db\"\nimport { useAuth } from \"@/contexts/auth-context\"\n\nexport async function GET(request) {\n  try {\n    const { searchParams } = new URL(request.url)\n    const userId = searchParams.get(\"userId\")\n    const clinicId = searchParams.get(\"clinicId\")\n\n    if (!userId || !clinicId) {\n      return NextResponse.json({ success: false, error: \"userId y clinicId son requeridos\" }, { status: 400 })\n    }\n\n    const patients = await query(\n      \"SELECT * FROM patients WHERE user_id = ? AND clinic_id = ? ORDER BY created_at DESC\",\n      [userId, clinicId],\n    )\n\n    return NextResponse.json({\n      success: true,\n      data: patients,\n    })\n  } catch (error) {\n    console.error(\"Get patients error:\", error)\n    return NextResponse.json({ success: false, error: \"Error al obtener pacientes\" }, { status: 500 })\n  }\n}\n\nexport async function POST(request) {\n  try {\n    const body = await request.json()\n    const { user, selectedClinic } = useAuth()\n    return NextResponse.json({ success: false, error: \"userId: \"+user.id+\" clinicId: \"+selectedClinic.id }, { status: 400 })\n\n    if (!user.id || !selectedClinic.id) {\n      return NextResponse.json({ success: false, error: \"userId y clinicId son requeridos\" }, { status: 400 })\n    }\n\n    const result = await query(\n      `INSERT INTO patients (user_id, clinic_id, name, owner, species, breed, age, weight, sex, color, medical_history, allergies)\n       VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)`,\n      [\n        user.id,\n        selectedClinic.id,\n        body.name,\n        body.owner,\n        body.species,\n        body.breed || null,\n        body.age || null,\n        body.weight || null,\n        body.sex,\n        body.color || null,\n        body.medicalHistory || null,\n        body.allergies || null,\n      ],\n    )\n\n    const newPatients = await query(\"SELECT * FROM patients WHERE id = ?\", [result.insertId])\n\n    return NextResponse.json({\n      success: true,\n      data: newPatients[0],\n    })\n  } catch (error) {\n    console.error(\"Create patient error:\", error)\n    return NextResponse.json({ success: false, error: \"Error al crear paciente\" }, { status: 500 })\n  }\n}\n\nexport async function PUT(request) {\n  try {\n    const body = await request.json()\n\n    if (!body.userId || !body.clinicId) {\n      return NextResponse.json({ success: false, error: \"userId y clinicId son requeridos\" }, { status: 400 })\n    }\n\n    await query(\n      `UPDATE patients \n       SET name = ?, owner = ?, species = ?, breed = ?, age = ?, \n           weight = ?, sex = ?, color = ?, medical_history = ?, allergies = ?\n       WHERE id = ? AND user_id = ? AND clinic_id = ?`,\n      [\n        body.name,\n        body.owner,\n        body.species,\n        body.breed || null,\n        body.age || null,\n        body.weight || null,\n        body.sex,\n        body.color || null,\n        body.medicalHistory || null,\n        body.allergies || null,\n        body.id,\n        body.userId,\n        body.clinicId,\n      ],\n    )\n\n    const updatedPatients = await query(\"SELECT * FROM patients WHERE id = ? AND user_id = ? AND clinic_id = ?\", [\n      body.id,\n      body.userId,\n      body.clinicId,\n    ])\n\n    if (updatedPatients.length === 0) {\n      return NextResponse.json({ success: false, error: \"Paciente no encontrado\" }, { status: 404 })\n    }\n\n    return NextResponse.json({\n      success: true,\n      data: updatedPatients[0],\n    })\n  } catch (error) {\n    console.error(\"Update patient error:\", error)\n    return NextResponse.json({ success: false, error: \"Error al actualizar paciente\" }, { status: 500 })\n  }\n}\n\nexport async function DELETE(request) {\n  try {\n    const { searchParams } = new URL(request.url)\n    const id = searchParams.get(\"id\")\n    const userId = searchParams.get(\"userId\")\n    const clinicId = searchParams.get(\"clinicId\")\n\n    if (!userId || !clinicId) {\n      return NextResponse.json({ success: false, error: \"userId y clinicId son requeridos\" }, { status: 400 })\n    }\n\n    const result = await query(\"DELETE FROM patients WHERE id = ? AND user_id = ? AND clinic_id = ?\", [\n      id,\n      userId,\n      clinicId,\n    ])\n\n    if (result.affectedRows === 0) {\n      return NextResponse.json({ success: false, error: \"Paciente no encontrado\" }, { status: 404 })\n    }\n\n    return NextResponse.json({\n      success: true,\n      message: \"Paciente eliminado correctamente\",\n    })\n  } catch (error) {\n    console.error(\"Delete patient error:\", error)\n    return NextResponse.json({ success: false, error: \"Error al eliminar paciente\" }, { status: 500 })\n  }\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}